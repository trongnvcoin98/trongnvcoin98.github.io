System.register("chunks:///_virtual/BattleScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MainLogic.ts","./EventMgr.ts","./Define.ts"],(function(i){var e,t,l,n,r,o,c,s,a,u,k,S,h,g,p,f,m,b,y;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,l=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){r=i.cclegacy,o=i._decorator,c=i.Button,s=i.Node,a=i.Label,u=i.tween,k=i.UIOpacity,S=i.Component},function(i){h=i.MainLogic},function(i){g=i.default,p=i.EventName},function(i){f=i.default,m=i.SkillType,b=i.SkillName,y=i.SkillDes}],execute:function(){var O,d,B,N,I,T,E,z,C,w,L,_,A,R,D,U,v,K,M,X,G,x,Z,F,Q,H,P,q,j,Y,J,V,W,$,ii,ei,ti,li,ni,ri,oi,ci,si,ai,ui,ki,Si,hi,gi,pi,fi,mi,bi,yi,Oi,di,Bi,Ni,Ii,Ti,Ei,zi,Ci,wi,Li,_i,Ai,Ri,Di,Ui,vi,Ki,Mi,Xi,Gi,xi,Zi,Fi,Qi,Hi,Pi;r._RF.push({},"52d44wiXpBMnYyOHzLOktLI","BattleScreen",void 0);var qi=o.ccclass,ji=o.property;i("BattleScreen",(O=qi("BattleScreen"),d=ji(c),B=ji(c),N=ji(s),I=ji(a),T=ji(a),E=ji(a),z=ji({group:{name:"SKILL",style:"section"}}),C=ji(c),w=ji({group:{name:"SKILL",style:"section"}}),L=ji(c),_=ji({group:{name:"SKILL",style:"section"}}),A=ji(c),R=ji({group:{name:"SKILL",style:"section"}}),D=ji(c),U=ji({group:{name:"SKILL",style:"section"}}),v=ji(c),K=ji({group:{name:"SKILL",style:"section"}}),M=ji(c),X=ji({group:{name:"SKILL",style:"section"}}),G=ji(c),x=ji({group:{name:"SKILL",style:"section"}}),Z=ji(c),F=ji({group:{name:"SKILL",style:"section"}}),Q=ji(c),H=ji({group:{name:"SKILL",style:"section"}}),P=ji(c),q=ji({group:{name:"Skill Info",style:"section"}}),j=ji(s),Y=ji({group:{name:"Skill Info",style:"section"}}),J=ji(s),V=ji({group:{name:"Skill Info",style:"section"}}),W=ji(a),$=ji({group:{name:"Skill Info",style:"section"}}),ii=ji(a),ei=ji({group:{name:"Skill Info",style:"section"}}),ti=ji(a),li=ji({group:{name:"Skill Info",style:"section"}}),ni=ji(a),ri=ji({group:{name:"Skill Info",style:"section"}}),oi=ji(a),ci=ji({group:{name:"Skill Info",style:"section"}}),si=ji(a),ai=ji({group:{name:"Skill Info",style:"section"}}),ui=ji(c),ki=ji({group:{name:"Skill Info",style:"section"}}),Si=ji(c),hi=ji({group:{name:"Zoom",style:"section"}}),gi=ji(c),pi=ji({group:{name:"Zoom",style:"section"}}),fi=ji(c),O((yi=e((bi=function(i){function e(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=i.call.apply(i,[this].concat(r))||this,l(e,"resetBtn",yi,n(e)),l(e,"replayBtn",Oi,n(e)),l(e,"resultNotiNode",di,n(e)),l(e,"resultText",Bi,n(e)),l(e,"turnText",Ni,n(e)),l(e,"usingSkill",Ii,n(e)),l(e,"seedSkill",Ti,n(e)),l(e,"bombSkill",Ei,n(e)),l(e,"noSkill",zi,n(e)),l(e,"rainSkill",Ci,n(e)),l(e,"quakeSkill",wi,n(e)),l(e,"timeSkill",Li,n(e)),l(e,"blockageSkill",_i,n(e)),l(e,"frozoneSkill",Ai,n(e)),l(e,"thornBallSkill",Ri,n(e)),l(e,"disguiseSkill",Di,n(e)),l(e,"OActiveBg",Ui,n(e)),l(e,"XActiveBg",vi,n(e)),l(e,"OSkillName",Ki,n(e)),l(e,"OSkillDes",Mi,n(e)),l(e,"XSkillName",Xi,n(e)),l(e,"XSkillDes",Gi,n(e)),l(e,"OTime",xi,n(e)),l(e,"XTime",Zi,n(e)),l(e,"leftUseSkillBtn",Fi,n(e)),l(e,"rightUseSkillBtn",Qi,n(e)),l(e,"zoomIn",Hi,n(e)),l(e,"zoomOut",Pi,n(e)),e.curSelectSkill=null,e}t(e,i);var r=e.prototype;return r.start=function(){this.resetBtn.node.on("click",this.onResetClick,this),this.replayBtn.node.on("click",this.onReplayClick,this),this.seedSkill.node.on("click",this.onSeedClick,this),this.bombSkill.node.on("click",this.onBombClick,this),this.noSkill.node.on("click",this.onNoSkillClick,this),this.rainSkill.node.on("click",this.onRainClick,this),this.quakeSkill.node.on("click",this.onQuakeClick,this),this.timeSkill.node.on("click",this.onTimeClick,this),this.blockageSkill.node.on("click",this.onBlockageClick,this),this.frozoneSkill.node.on("click",this.onFrozoneClick,this),this.thornBallSkill.node.on("click",this.onThornBallClick,this),this.thornBallSkill.node.on("click",this.onThornBallClick,this),this.disguiseSkill.node.on("click",this.onDisguiseClick,this),this.leftUseSkillBtn.node.on("click",this.onOUsingSkillClick,this),this.rightUseSkillBtn.node.on("click",this.onXUsingSkillClick,this),this.zoomIn.node.on("click",this.onZoomInClick,this),this.zoomOut.node.on("click",this.onZoomOutClick,this),g.on(p.START_GAME,this.onStartGame,this),g.on(p.END_GAME,this.onEndGame,this),g.on(p.UPDATE_TURN_TEXT,this.updateTurnText,this),g.on(p.CLEAR_SKILL_USING,this.clearSkillUsing,this)},r.update=function(i){this.OTime.node.active=h._intance.turn%2==0,this.XTime.node.active=h._intance.turn%2!=0;var e=h._intance.turn%2==0?this.OTime:this.XTime;if((h._intance.turn%2==0?h._intance.oTurnReduceTime:h._intance.xTurnReduceTime)>0){var t=Math.ceil(f.turnTime/2);e.string=(t-h._intance.curTime).toString()}else e.string=(f.turnTime-h._intance.curTime).toString()},r.onResetClick=function(){h._intance.resetBoad()},r.onReplayClick=function(){this.resultNotiNode.active=!1,h._intance.resetBoad()},r.onOUsingSkillClick=function(){switch(this.curSelectSkill){case m.RAIN:h._intance.useRain();break;case m.BLOCKAGE:h._intance.useBlockage();break;case m.FROZONE:h._intance.useFrozone();break;case m.THORN:h._intance.useThorn();break;case m.DISGUISE:h._intance.useDisguise()}this.clearUsingSkillText()},r.onXUsingSkillClick=function(){switch(this.curSelectSkill){case m.QUAKE:h._intance.useQuake();break;case m.BOMB:h._intance.useBomb();break;case m.SEED:h._intance.useSeed();break;case m.TIME:h._intance.useTime()}this.clearUsingSkillText()},r.onSeedClick=function(){this.curSelectSkill=m.SEED,this.updateSkillName(this.curSelectSkill)},r.onBombClick=function(){this.curSelectSkill=m.BOMB,this.updateSkillName(this.curSelectSkill)},r.onRainClick=function(){this.curSelectSkill=m.RAIN,this.updateSkillName(this.curSelectSkill)},r.onQuakeClick=function(){this.curSelectSkill=m.QUAKE,this.updateSkillName(this.curSelectSkill)},r.onTimeClick=function(){this.curSelectSkill=m.TIME,this.updateSkillName(this.curSelectSkill)},r.onBlockageClick=function(){this.curSelectSkill=m.BLOCKAGE,this.updateSkillName(this.curSelectSkill)},r.onFrozoneClick=function(){this.curSelectSkill=m.FROZONE,this.updateSkillName(this.curSelectSkill)},r.onThornBallClick=function(){this.curSelectSkill=m.THORN,this.updateSkillName(this.curSelectSkill)},r.onDisguiseClick=function(){this.curSelectSkill=m.DISGUISE,this.updateSkillName(this.curSelectSkill)},r.clearUsingSkillText=function(){this.curSelectSkill=m.NONE,this.updateSkillName(this.curSelectSkill)},r.onStartGame=function(){this.flickerPlayerBg()},r.onEndGame=function(i){this.resultText.string=i%2==0?"O win":"X win",this.resultNotiNode.active=!0},r.updateSkillName=function(i){var e=h._intance.turn%2==0;if((-1!=f.xSkills.findIndex((function(e){return e==i}))||e)&&(-1!=f.oSkills.findIndex((function(e){return e==i}))||!e)){var t=e?this.OSkillName:this.XSkillName,l=e?this.OSkillDes:this.XSkillDes;switch(i){case m.SEED:this.usingSkill.string="Skill:"+b.SEED,t.string=b.SEED,l.string=y.SEED;break;case m.BOMB:this.usingSkill.string="Skill:"+b.BOMB,t.string=b.BOMB,l.string=y.BOMB;break;case m.RAIN:this.usingSkill.string="Skill:"+b.RAIN,t.string=b.RAIN,l.string=y.RAIN;break;case m.QUAKE:this.usingSkill.string="Skill:"+b.QUAKE,t.string=b.QUAKE,l.string=y.QUAKE;break;case m.TIME:this.usingSkill.string="Skill:"+b.TIME,t.string=b.TIME,l.string=y.TIME;break;case m.BLOCKAGE:this.usingSkill.string="Skill:"+b.BLOCKAGE,t.string=b.BLOCKAGE,l.string=y.BLOCKAGE;break;case m.FROZONE:this.usingSkill.string="Skill:"+b.FROZONE,t.string=b.FROZONE,l.string=y.FROZONE;break;case m.THORN:this.usingSkill.string="Skill: "+b.THORN,t.string=b.THORN,l.string=y.THORN;break;case m.DISGUISE:this.usingSkill.string="Skill: "+b.DISGUISE,t.string=b.DISGUISE,l.string=y.DISGUISE;break;case m.NONE:}}},r.updateTurnText=function(i){this.turnText.string=i,this.OActiveBg.active="O"==i,this.XActiveBg.active="X"==i},r.clearSkillUsing=function(){this.OSkillName.string="----------------",this.OSkillDes.string="-------",this.XSkillName.string="----------------",this.XSkillDes.string="-------"},r.flickerPlayerBg=function(){u(this.OActiveBg.getComponent(k)).to(.5,{opacity:10}).to(.5,{opacity:255}).union().repeatForever().start(),u(this.XActiveBg.getComponent(k)).to(.5,{opacity:10}).to(.5,{opacity:255}).union().repeatForever().start()},r.onNoSkillClick=function(){h._intance.unuseSkill()},r.onZoomInClick=function(){g.emit(p.ZOOM_IN_BOARD)},r.onZoomOutClick=function(){g.emit(p.ZOOM_OUT_BOARD)},e}(S)).prototype,"resetBtn",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oi=e(bi.prototype,"replayBtn",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),di=e(bi.prototype,"resultNotiNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bi=e(bi.prototype,"resultText",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ni=e(bi.prototype,"turnText",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ii=e(bi.prototype,"usingSkill",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ti=e(bi.prototype,"seedSkill",[z,C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ei=e(bi.prototype,"bombSkill",[w,L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zi=e(bi.prototype,"noSkill",[_,A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ci=e(bi.prototype,"rainSkill",[R,D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wi=e(bi.prototype,"quakeSkill",[U,v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Li=e(bi.prototype,"timeSkill",[K,M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_i=e(bi.prototype,"blockageSkill",[X,G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ai=e(bi.prototype,"frozoneSkill",[x,Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ri=e(bi.prototype,"thornBallSkill",[F,Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Di=e(bi.prototype,"disguiseSkill",[H,P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ui=e(bi.prototype,"OActiveBg",[q,j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vi=e(bi.prototype,"XActiveBg",[Y,J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ki=e(bi.prototype,"OSkillName",[V,W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mi=e(bi.prototype,"OSkillDes",[$,ii],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xi=e(bi.prototype,"XSkillName",[ei,ti],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gi=e(bi.prototype,"XSkillDes",[li,ni],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xi=e(bi.prototype,"OTime",[ri,oi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zi=e(bi.prototype,"XTime",[ci,si],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fi=e(bi.prototype,"leftUseSkillBtn",[ai,ui],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qi=e(bi.prototype,"rightUseSkillBtn",[ki,Si],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Hi=e(bi.prototype,"zoomIn",[hi,gi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pi=e(bi.prototype,"zoomOut",[pi,fi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mi=bi))||mi));r._RF.pop()}}}));

System.register("chunks:///_virtual/Bot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MainLogic.ts","./EventMgr.ts"],(function(e){var t,n,r,a,i,s;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy,r=e.Vec2},function(e){a=e.MainLogic},function(e){i=e.default,s=e.EventName}],execute:function(){n._RF.push({},"52cfbYjF8BO47PUKyaqK0A2","Bot",void 0),e("Bot",function(){function e(){this.curChessboard=[],this.sizeChess=0,this.WIN_SCORE=1e8}var n=e.prototype;return n.evaluateBoardForPlayer=function(e,t){var n=this.getScore(e,!0,t);return 0==n&&(n=1),this.getScore(e,!1,t)/n},n.getScore=function(e,t,n){return this.evaluateHoz(e,t,n)+this.evaluateVer(e,t,n)+this.evaluateDiagonal(e,t,n)},n.calculateNextMove=function(){new r,a._intance.turn;this.curChessboard=a._intance.chessboard;var e=this.searchWinMove(this.curChessboard);if(null!=e)return console.log("WIN MOVE: ",e),e;var t=this.generateMove(this.curChessboard);return t[Math.floor(Math.random()*t.length)]},n.searchWinMove=function(e){var t=this.generateMove(e),n=a._intance.turn%2==0?"O":"X";console.log("VALUE CHEK ",n),i.emit(s.CLEAR_PLACEHOLDER),i.emit(s.UPDATE_PLACEHODLER,t);var r=[];this.sizeChess=a._intance.sizeChess,e.forEach((function(e){return r.push(Object.assign({},e))}));for(var u=0;u<t.length;u++){var o=t[u];if(r[o.x][o.y]=n,this.getScore(r,"X"==n,!1)>=this.WIN_SCORE)return t[u];e.forEach((function(e){return r.push(Object.assign({},e))}))}return null},n.generateMove=function(e){for(var t=[],n=a._intance.sizeChess,i=0;i<n;i++)for(var s=0;s<n;s++)if(""==e[i][s]){if(i>0){if(s>0&&(""!=e[i-1][s-1]||""!=e[i][s-1])){var u=new r(i,s);t.push(u);continue}if(s<n-1&&(""!=e[i-1][s+1]||""!=e[i][s+1])){var o=new r(i,s);t.push(o);continue}if(""!=e[i-1][s]){var c=new r(i,s);t.push(c);continue}}if(i<n-1&&s>0){if(""!=e[i+1][s-1]||""!=e[i][s-1]){var h=new r(i,s);t.push(h);continue}if(s<n-1&&(e[i+1][s+1]||""!=e[i][s+1])){var l=new r(i,s);t.push(l);continue}if(""!=e[i+1][s]){var v=new r(i,s);t.push(v);continue}}}return t},n.minimaxSearchAB=function(e,t,n,r,a){if(0==e)return[this.evaluateBoardForPlayer(t,!n),null,null];var i=this.generateMove(t);if(0==i.length)return[this.evaluateBoardForPlayer(t,!n),null,null];if(n)for(var s=0;s<i.length;s++)i[s]},n.evaluateHoz=function(e,t,n){for(var r=[0,2,0],a=0;a<e.length;a++){for(var i=0;i<e.length;i++)this.evaluateDir(e,a,i,t,n,r);this.evaluateDirAfterOnePass(r,t,n)}return r[2]},n.evaluateVer=function(e,t,n){for(var r=[0,2,0],a=0;a<e[0].length;a++){for(var i=0;i<e.length;i++)this.evaluateDir(e,i,a,t,n,r);this.evaluateDirAfterOnePass(r,t,n)}return r[2]},n.evaluateDiagonal=function(e,t,n){for(var r=[0,2,0],a=0;a<=2*(e.length-1);a++){for(var i=Math.min(0,a-e.length+1),s=Math.min(e.length-1,a),u=i;u<=s;u++)this.evaluateDir(e,u,a-u,t,n,r);this.evaluateDirAfterOnePass(r,t,n)}for(var o=1-e.length;o<e.length;o++){for(var c=Math.max(0,o),h=Math.min(e.length+o-1,e.length-1),l=c;l<=h;++l)this.evaluateDir(e,l,l-o,t,n,r);this.evaluateDirAfterOnePass(r,t,n)}return r[2]},n.evaluateDir=function(e,t,n,r,a,i){e[t][n]==(r?"X":"O")?i[0]+=1:""==e[t][n]?(i[0]>0&&(i[1]-=1,i[2]+=this.getConsecutiveSetScore(i[0],i[1],r==a),i[0]=0),i[1]=1):i[0]>0?(i[2]+=this.getConsecutiveSetScore(i[0],i[1],r==a),i[0]=0,i[1]=2):i[1]=2},n.evaluateDirAfterOnePass=function(e,t,n){e[0]>0&&(e[2]+=this.getConsecutiveSetScore(e[0],e[1],t==n)),e[0]=0,e[1]=2},n.getConsecutiveSetScore=function(e,t,n){var r=1e6;if(2==t&&e<5)return 0;switch(e){case 5:return this.WIN_SCORE;case 4:return n?r:0==t?25e4:200;case 3:return 0==t?n?5e4:200:n?10:5;case 2:return 0==t?n?7:5:3;case 1:return 1}return 0},t(e,null,[{key:"_instance",get:function(){return e.instance||(e.instance=new e),e.instance}}]),e}()).instance=null,n._RF.pop()}}}));

System.register("chunks:///_virtual/Cell.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MainLogic.ts","./Define.ts"],(function(e){var i,t,n,o,r,l,u,a,s,c,h,d,b,f,p;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,u=e.Node,a=e.Label,s=e.Vec2,c=e.Color,h=e.UITransform,d=e.Component},function(e){b=e.MainLogic},function(e){f=e.ObjectType,p=e.SkillType}],execute:function(){var g,v,T,k,S,w,y,m,x,E,C,z,O,F,N,M,D,B,R,H,V,I,_,L,U,X,W,A,G,P,j,J,q,K,Y,Q,Z,$,ee,ie,te;r._RF.push({},"6b259kWNDxGNJYbcJab93qi","Cell",void 0);var ne=l.ccclass,oe=l.property;e("Cell",(g=ne("Cell"),v=oe(u),T=oe(a),k=oe(u),S=oe(a),w=oe(a),y=oe(u),m=oe(a),x=oe(u),E=oe(a),C=oe(u),z=oe(a),O=oe(u),F=oe(a),N=oe(a),M=oe(u),D=oe(a),B=oe(a),R=oe(a),H=oe(u),g((_=i((I=function(e){function i(){for(var i,t=arguments.length,r=new Array(t),l=0;l<t;l++)r[l]=arguments[l];return i=e.call.apply(e,[this].concat(r))||this,n(i,"valueNode",_,o(i)),n(i,"valueText",L,o(i)),n(i,"seedSkill",U,o(i)),n(i,"seedTurn",X,o(i)),n(i,"seedOwner",W,o(i)),n(i,"bombSkill",A,o(i)),n(i,"bombTurn",G,o(i)),n(i,"iceSkill",P,o(i)),n(i,"iceTurn",j,o(i)),n(i,"blockSkill",J,o(i)),n(i,"blockTurn",q,o(i)),n(i,"thornSkill",K,o(i)),n(i,"thornTurn",Y,o(i)),n(i,"thornOwner",Q,o(i)),n(i,"disguiseSkill",Z,o(i)),n(i,"disguiseText",$,o(i)),n(i,"disguiseTurn",ee,o(i)),n(i,"disguiseWarn",ie,o(i)),n(i,"placeHolder",te,o(i)),i.pos=new s,i.onClickFun=function(){},i.onMoveTouchFun=function(){},i.onEndTouchFun=function(){},i.onTouchBoardFun=function(){},i.onMoveBoardFun=function(){},i.placeholderTween=void 0,i.deltaVec=new s,i}t(i,e);var r=i.prototype;return r.start=function(){this.resetCell(),this.node.on(u.EventType.TOUCH_START,this.onCellClick,this),this.node.on(u.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(u.EventType.TOUCH_END,this.touchEnd,this)},r.update=function(e){},r.setup=function(e,i,t){this.pos=e,this.onClickFun=i,""!=t?(this.valueText.string=t,this.valueNode.active=!0):(this.valueText.string="",this.valueNode.active=!1)},r.setTouchAction=function(e,i,t){this.onClickFun=e,this.onMoveTouchFun=i,this.onEndTouchFun=t},r.updateValue=function(e){if(this.valueText.string=e,this.valueNode.active="X"==e||"O"==e,this.valueText.color="X"==e?c.RED:c.GREEN,this.seedSkill.active=e==f.SEED,this.blockSkill.active=e==f.BLOCK,this.thornSkill.active=e==f.THORN,-1!=e.indexOf(f.ICE)){var i=e.replace(f.ICE,"");this.valueText.string=i,this.valueNode.active="X"==i||"O"==i,this.valueText.color="X"==i?c.RED:c.GREEN}},r.wasUsed=function(){return this.valueNode.active},r.getValueText=function(){return this.valueText.string},r.resetCell=function(){this.valueNode.active=!1,this.valueText.string="",this.seedSkill.active=!1,this.bombSkill.active=!1,this.iceSkill.active=!1,this.blockSkill.active=!1,this.thornSkill.active=!1,this.disguiseSkill.active=!1},r.onCellClick=function(e){this.onClickFun(this.pos),this.onTouchBoardFun(e.getUILocation())},r.updateSeed=function(e){this.seedSkill.active=!0,this.seedTurn.string=e.livedTurn.toString(),this.seedOwner.string=e.owner.toString()},r.updateBomb=function(e){this.bombSkill.active=!0,this.bombTurn.string=e.toString()},r.removeBomb=function(){this.bombSkill.active=!1},r.updateIce=function(e){this.iceSkill.active=!0,this.iceTurn.string=e.toString()},r.updateBlock=function(e){this.blockSkill.active=!0,this.blockTurn.string=e.toString()},r.removeIce=function(){this.iceSkill.active=!1},r.updateThorn=function(e){this.thornSkill.active=!0,this.thornTurn.string=e.existTurn.toString(),this.thornOwner.string=e.owner.toString()},r.removeThorn=function(){this.thornSkill.active=!1},r.removeDisguise=function(){this.disguiseSkill.active=!1},r.updateDisguise=function(e,i){this.disguiseSkill.active=!0,this.disguiseTurn.string=e.existTurn.toString(),this.disguiseWarn.string="O"==e.owner?"X":"O",this.disguiseText.string="O"==e.owner?"X":"O",this.disguiseText.color="X"==e.owner?c.GREEN:c.RED,this.disguiseTurn.node.active=e.owner==i,this.disguiseWarn.node.active=e.owner==i,i==e.owner&&(this.disguiseText.string=e.owner,this.disguiseText.color="X"==e.owner?c.RED:c.GREEN)},r.activePlaceHolder=function(){this.placeHolder.active=!0},r.deactivePlaceHolder=function(){this.placeHolder.active=!1},r.touchMove=function(e){if(b._intance.curUsingSkill==p.RAIN){var i=this.node.getWorldPosition(),t=this.node.getComponent(h).width,n=new s;n.x=e.getUILocation().x-i.x,n.y=e.getUILocation().y-i.y;var o=Math.floor(Math.abs(n.x/t)),r=Math.floor(Math.abs(n.y/t));o=n.x<0?-o:o,r=n.y<0?r:-r;var l=n.x%t,u=n.y%t;if(n.x<0&&l<-t/2&&(o-=1),n.x>0&&l>t/2&&(o+=1),n.y<0&&u<t/2&&(r+=1),n.y>0&&u>t/2&&(r-=1),this.deltaVec=new s(this.pos.x+o,this.pos.y+r),this.deltaVec.x>=b._intance.sizeChess||this.deltaVec.y>=b._intance.sizeChess||this.deltaVec.x<0||this.deltaVec.y<0)return;this.onMoveTouchFun(this.deltaVec)}else this.onMoveBoardFun(e.getDelta())},r.touchEnd=function(){this.onEndTouchFun(this.pos)},r.setTouchBoardFun=function(e){this.onTouchBoardFun=e},r.setMoveBoardAction=function(e){this.onMoveBoardFun=e},i}(d)).prototype,"valueNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(I.prototype,"valueText",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=i(I.prototype,"seedSkill",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=i(I.prototype,"seedTurn",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(I.prototype,"seedOwner",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(I.prototype,"bombSkill",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(I.prototype,"bombTurn",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(I.prototype,"iceSkill",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(I.prototype,"iceTurn",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=i(I.prototype,"blockSkill",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(I.prototype,"blockTurn",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=i(I.prototype,"thornSkill",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=i(I.prototype,"thornTurn",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=i(I.prototype,"thornOwner",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=i(I.prototype,"disguiseSkill",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=i(I.prototype,"disguiseText",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=i(I.prototype,"disguiseTurn",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=i(I.prototype,"disguiseWarn",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=i(I.prototype,"placeHolder",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=I))||V));r._RF.pop()}}}));

System.register("chunks:///_virtual/Chessboard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Cell.ts","./EventMgr.ts","./MainLogic.ts","./Define.ts"],(function(e){var t,o,n,s,i,r,c,a,h,l,u,d,v,p,f,m,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,c=e.Prefab,a=e.Node,h=e.instantiate,l=e.Vec2,u=e.Vec3,d=e.Component},function(e){v=e.Cell},function(e){p=e.default,f=e.EventName},function(e){m=e.MainLogic},function(e){C=e.default}],execute:function(){var g,_,b,T,P,E,B;i._RF.push({},"3d6aeVTvgFHbqdOXmZ05VwK","Chessboard",void 0);var O=r.ccclass,R=r.property;e("Chessboard",(g=O("Chessboard"),_=R(c),b=R(a),g((E=t((P=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,n(t,"cellPrefab",E,s(t)),n(t,"chessboardRender",B,s(t)),t.cells=[],t.curTouch=void 0,t.curPlaceHolder=[],t.startTouchPos=void 0,t.curMovePos=void 0,t}o(t,e);var i=t.prototype;return i.start=function(){p.on(f.UPDATE_BOARD,this.updateBoard,this),p.on(f.INIT_BOARD,this.initChessboard,this),p.on(f.UPDATE_SEED_SHOW,this.updateSeed,this),p.on(f.UPDATE_BOMB_SHOW,this.updateBomb,this),p.on(f.UPDATE_ICE_SHOW,this.updateIce,this),p.on(f.UPDATE_BLOCK_SHOW,this.updateBlock,this),p.on(f.UPDATE_THORN_SHOW,this.updateThorn,this),p.on(f.UPDATE_DISGUISE_SHOW,this.updateDisguise,this),p.on(f.RESET_BOARD,this.resetChessboard,this),p.on(f.REMOVE_BOMB,this.removeBomb,this),p.on(f.REMOVE_ICE,this.removeIce,this),p.on(f.REMOVE_THORN,this.removeThorn,this),p.on(f.REMOVE_DISGUISE,this.removeDisguise,this),p.on(f.UPDATE_PLACEHODLER,this.updatePlaceholder,this),p.on(f.CLEAR_PLACEHOLDER,this.clearPlaceholder,this),p.on(f.ZOOM_IN_BOARD,this.onZoomIn,this),p.on(f.ZOOM_OUT_BOARD,this.onZoomOut,this),m._intance.initDone&&this.initChessboard()},i.update=function(e){},i.initChessboard=function(){this.cells=[];for(var e=0;e<m._intance.sizeChess;e++)for(var t=0;t<m._intance.sizeChess;t++){var o=h(this.cellPrefab),n=o.getComponent(v);n.setup(new l(t,e),this.onCellClick.bind(this),""),n.setTouchAction(this.onCellClick.bind(this),this.onCellMoveTouch.bind(this),this.onCellEndTouch.bind(this)),n.setTouchBoardFun(this.onTouchBoardPos.bind(this)),n.setMoveBoardAction(this.onMoveBoard.bind(this)),this.cells.push(o),this.chessboardRender.addChild(o)}},i.resetChessboard=function(){this.cells.forEach((function(e){return e.getComponent(v).resetCell()}))},i.onCellClick=function(e){this.curTouch=e,m._intance.selectedCellStart(e)},i.onCellEndTouch=function(e){m._intance.selectedCellConfirm(e)},i.onCellMoveTouch=function(e){this.curTouch!=e&&m._intance.selectedCellChange(e)},i.convertXYtoNum=function(e,t){return e+m._intance.sizeChess*t},i.updateBoard=function(){for(var e=0;e<m._intance.sizeChess;e++)for(var t=0;t<m._intance.sizeChess;t++){var o=m._intance.chessboard[t][e];this.cells[this.convertXYtoNum(t,e)].getComponent(v).updateValue(o)}},i.updateSeed=function(){for(var e=m._intance.seedList,t=0;t<e.length;t++){var o=e[t],n=this.convertXYtoNum(o.pos.x,o.pos.y);this.cells[n].getComponent(v).updateSeed(o)}},i.updateBomb=function(){for(var e=m._intance.bombList,t=0;t<e.length;t++){var o=e[t],n=this.convertXYtoNum(o.pos.x,o.pos.y);this.cells[n].getComponent(v).updateBomb(o.existTurn)}},i.removeBomb=function(e){for(var t=0;t<e.length;t++){var o=e[t],n=this.convertXYtoNum(o.pos.x,o.pos.y);this.cells[n].getComponent(v).removeBomb()}},i.updateIce=function(){for(var e=m._intance.iceList,t=0;t<e.length;t++){var o=e[t],n=this.convertXYtoNum(o.pos.x,o.pos.y);this.cells[n].getComponent(v).updateIce(o.existTurn)}},i.removeIce=function(e){for(var t=0;t<e.length;t++){var o=e[t],n=this.convertXYtoNum(o.pos.x,o.pos.y);this.cells[n].getComponent(v).removeIce()}},i.updateBlock=function(){for(var e=m._intance.blockList,t=0;t<e.length;t++){var o=e[t],n=this.convertXYtoNum(o.pos.x,o.pos.y);this.cells[n].getComponent(v).updateBlock(o.existTurn)}},i.updateThorn=function(){for(var e=m._intance.thornList,t=0;t<e.length;t++){var o=e[t],n=this.convertXYtoNum(o.pos.x,o.pos.y);this.cells[n].getComponent(v).updateThorn(o)}},i.removeThorn=function(e){for(var t=0;t<e.length;t++){var o=e[t],n=this.convertXYtoNum(o.pos.x,o.pos.y);this.cells[n].getComponent(v).removeThorn()}},i.updateDisguise=function(e){for(var t=m._intance.disguiseList,o=0;o<t.length;o++){var n=t[o],s=this.convertXYtoNum(n.pos.x,n.pos.y);this.cells[s].getComponent(v).updateDisguise(n,e)}},i.removeDisguise=function(e){for(var t=0;t<e.length;t++){var o=e[t],n=this.convertXYtoNum(o.pos.x,o.pos.y);this.cells[n].getComponent(v).removeDisguise()}},i.updatePlaceholder=function(e){this.curPlaceHolder=e;for(var t=0;t<e.length;t++){var o=this.convertXYtoNum(e[t].x,e[t].y);this.cells[o].getComponent(v).activePlaceHolder()}},i.clearPlaceholder=function(e){for(var t=e||this.curPlaceHolder,o=0;o<t.length;o++){var n=this.convertXYtoNum(t[o].x,t[o].y);this.cells[n].getComponent(v).deactivePlaceHolder()}},i.onMoveBoard=function(e){var t=this.chessboardRender.position.clone();this.chessboardRender.setPosition(new u(t.x+e.x,t.y+e.y)),m._intance.isMovingBoard()||(l.add(this.curMovePos,this.curMovePos,e),(this.curMovePos.x-this.startTouchPos.x>35||this.curMovePos.y-this.startTouchPos.y>35)&&m._intance.setMovingBoard(!0))},i.onTouchBoardPos=function(e){this.startTouchPos=e.clone(),this.curMovePos=e.clone()},i.onZoomIn=function(){var e=this.chessboardRender.scale;e.x<1&&this.chessboardRender.setScale(e.x+C.zoomChangeRate,e.y+C.zoomChangeRate)},i.onZoomOut=function(){var e=this.chessboardRender.scale;e.x>.4&&this.chessboardRender.setScale(e.x-C.zoomChangeRate,e.y-C.zoomChangeRate)},t}(d)).prototype,"cellPrefab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(P.prototype,"chessboardRender",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=P))||T));i._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/Define.ts",["cc"],(function(n){var t,i;return{setters:[function(n){t=n.cclegacy,i=n._decorator}],execute:function(){t._RF.push({},"5eccc6olCdFEIs4PDs9Pgf3","Define",void 0);i.ccclass,i.property;var h=n("SkillType",function(n){return n.NONE="NONE",n.SEED="SEED",n.BOMB="BOMB",n.RAIN="RAIN",n.QUAKE="QUAKE",n.TIME="TIME",n.BLOCKAGE="BLOCKAGE",n.FROZONE="FROZONE",n.THORN="THORN",n.DISGUISE="DISGUISE",n}({}));n("default",new function(){this.seedGrownTurn=3,this.bombExplodeTurn=3,this.quakeNumEachSide=2,this.turnTime=25,this.timeSkillTurnNum=5,this.iceExistTurn=3,this.numBlockInBlokageSkill=3,this.blockExistTurn=3,this.thornExistTurn=5,this.thornMoveRadius=5,this.thornMoveRate=[.25,.5,.25],this.disguiseNum=3,this.disguiseExistTurn=5,this.oSkills=[h.RAIN,h.BLOCKAGE,h.FROZONE,h.THORN,h.DISGUISE],this.xSkills=[h.SEED,h.BOMB,h.QUAKE,h.TIME],this.zoomChangeRate=.1}),n("ObjectType",function(n){return n.SEED="SEED",n.ICE="+ICE",n.THORN="THORN",n.BLOCK="BLOCK",n}({})),n("PlaceholderType",function(n){return n.NONE="NONE",n.SIZE_FIVE="SIZE_FIVE",n.X_CELLS="X_CELLS",n.O_CELLS="O_CELLS",n.EMPTY_CELLS="EMPTY_CELLS",n}({})),n("SkillName",function(n){return n.SEED="Hạt mầm hy vọng",n.BOMB="Bom hẹn lượt",n.RAIN="Cơn mưa cuốn sạch",n.QUAKE="Động đất",n.TIME="Giảm thời gian",n.BLOCKAGE="Chướng ngại vật",n.FROZONE="Đóng băng",n.THORN="Cầu gai",n.DISGUISE="Nguỵ trang",n}({})),n("SkillDes",function(n){return n.SEED="Đánh dấu 1 vị trí qua 3 turn, thì sẽ nảy mầm lên 1 quân cờ của bên mình",n.BOMB="Đặt bom lên 1 quân cờ của đối thủ, chỉ định, nổ chậm sau 3 turn",n.RAIN="Spawn 1 ô mưa kích thước (5 x 5) trên bàn cờ",n.QUAKE="Tạo động đất và phá cờ cả 2 bên (mỗi bên 2 con).",n.TIME="Trừ 50% thơi gian chơi của đối thủ trong 5 turn",n.BLOCKAGE="Tạo 3 chướng ngại vật trên bàn cờ ngăn người chơi 2 bên đặt cờ trong 3 turn.",n.FROZONE="Đóng băng quân cờ đối phương làm cho quân cờ đó không đc tính trong 3 turn kế tiếp. Sau 3 turn sẽ được tính lại bình thường.",n.THORN="Tạo 1 quả cầu gai. Sau mỗi lượt, cầu gai sẽ nhảy đến một ô bất kì(trừ những ô của người chơi). Ngăn người chơi đặt cờ và phá hủy cờ đối phương",n.DISGUISE="3 con bất kì của bên mình sẽ biến thành màu của đối phương. Nhưng vẫn tính thắng thua như bình thường.",n}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/EventMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(E){var _,O,T;return{setters:[function(E){_=E.inheritsLoose},function(E){O=E.cclegacy,T=E.EventTarget}],execute:function(){O._RF.push({},"2a38eXO4J5LHZUihRUsJKhe","EventMgr",void 0);var A=function(E){function O(){return E.apply(this,arguments)||this}return _(O,E),O}(T);E("EventName",function(E){return E.START_GAME="START_GAME",E.INIT_BOARD="INIT_BOARD",E.UPDATE_BOARD="UPDATE_BOARD",E.END_GAME="END_GAME",E.RESET_BOARD="RESET_BOARD",E.UPDATE_SKILL_NAME="UPDATE_SKILL_NAME",E.UPDATE_SEED_SHOW="UPDATE_SEED_SHOW",E.UPDATE_TURN_TEXT="UPDATE_TURN_TEXT",E.UPDATE_BOMB_SHOW="UPDATE_BOMB_SHOW",E.REMOVE_BOMB="REMOVE_BOMB",E.UPDATE_ICE_SHOW="UPDATE_ICE_SHOW",E.REMOVE_ICE="REMOVE_ICE",E.UPDATE_BLOCK_SHOW="UPDATE_BLOCK_SHOW",E.UPDATE_THORN_SHOW="UPDATE_THORN_SHOW",E.REMOVE_THORN="REMOVE_THORN",E.UPDATE_DISGUISE_SHOW="UPDATE_DISGUISE_SHOW",E.REMOVE_DISGUISE="REMOVE_DISGUISE",E.UPDATE_PLACEHODLER="UPDATE_PLACEHODLER",E.CLEAR_PLACEHOLDER="CLEAR_PLACEHOLDER",E.SHOW_TOAST="SHOW_TOAST",E.CLEAR_SKILL_USING="CLEAR_SKILL_USING",E.START_PLAY_WITH_BOT="START_PLAY_WITH_BOT",E.ZOOM_IN_BOARD="ZOOM_IN_BOARD",E.ZOOM_OUT_BOARD="ZOOM_OUT_BOARD",E}({})),E("default",new A);O._RF.pop()}}}));

System.register("chunks:///_virtual/GameMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MainLogic.ts","./EventMgr.ts"],(function(t){var n,i,e,r,a,o,c,l,s,u,p,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,c=t.Node,l=t.Button,s=t.Component},function(t){u=t.MainLogic},function(t){p=t.default,f=t.EventName}],execute:function(){var h,y,m,B,g,d,b,v,M;a._RF.push({},"0d5fc/nRipJh5kJIl5TPMco","GameMgr",void 0);var _=o.ccclass,G=o.property;t("GameMgr",(h=_("GameMgr"),y=G(c),m=G(l),B=G(l),h((b=n((d=function(t){function n(){for(var n,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=t.call.apply(t,[this].concat(a))||this,e(n,"startScr",b,r(n)),e(n,"playBtn",v,r(n)),e(n,"playWithBotBtn",M,r(n)),n}i(n,t);var a=n.prototype;return a.start=function(){this.playBtn.node.on("click",this.startGame,this),this.playWithBotBtn.node.on("click",this.startPlayWBot,this),this.startScr.active=!0},a.update=function(t){},a.startGame=function(){this.startScr.active=!1,u._intance.initChessboardData(),p.emit(f.START_GAME)},a.startPlayWBot=function(){this.startGame(),p.emit(f.START_PLAY_WITH_BOT),u._intance.startPlayWithBot()},n}(s)).prototype,"startScr",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(d.prototype,"playBtn",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(d.prototype,"playWithBotBtn",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=d))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./BattleScreen.ts","./Bot.ts","./Cell.ts","./Chessboard.ts","./Define.ts","./SpawnObject.ts","./MainLogic.ts","./GameMgr.ts","./EventMgr.ts","./Toast.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainLogic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventMgr.ts","./Define.ts","./Bot.ts"],(function(t){var i,e,s,n,r,o,h,u,a,l,c,f,d;return{setters:[function(t){i=t.inheritsLoose,e=t.createClass},function(t){s=t.cclegacy,n=t.Vec2,r=t.Rect,o=t.Component},function(t){h=t.default,u=t.EventName},function(t){a=t.default,l=t.SkillType,c=t.PlaceholderType,f=t.ObjectType},function(t){d=t.Bot}],execute:function(){s._RF.push({},"93344O7rrBMkrJqDqEU3aqC","MainLogic",void 0),t("MainLogic",function(t){function s(){var i;return(i=t.call(this)||this).sizeChess=25,i.turn=0,i.chessboard=[],i.seedList=[],i.bombList=[],i.iceList=[],i.blockList=[],i.thornList=[],i.disguiseList=[],i.removeSkillList=[],i.initDone=!1,i.curPlaceholder=[],i.curUsingSkill=l.NONE,i.timeSchedule=void 0,i.curTime=0,i.oTurnReduceTime=0,i.xTurnReduceTime=0,i.isPlayWithBot=!1,i.boardMoving=!1,i}i(s,t);var o=s.prototype;return o.startCountTime=function(){var t=this;this.curTime=0,this.timeSchedule=setInterval((function(){t.curTime+=1;var i=t.xTurnReduceTime>0?Math.ceil(a.turnTime/2):a.turnTime,e=t.oTurnReduceTime>0?Math.ceil(a.turnTime/2):a.turnTime,s=t.turn%2==0?e:i;t.curTime>=s&&(h.emit(u.END_GAME,t.turn+1),t.endCountTime())}),1e3)},o.endCountTime=function(){this.curTime=0,clearInterval(this.timeSchedule)},o.initChessboardData=function(){for(var t=0;t<this.sizeChess;t++){this.chessboard[t]=[];for(var i=0;i<this.sizeChess;i++)this.chessboard[t].push("")}h.emit(u.INIT_BOARD),this.initDone=!0,this.startCountTime()},o.toggleSkill=function(t){h.emit(u.CLEAR_PLACEHOLDER),this.curUsingSkill=t,t==l.NONE&&this.showPlaceHolder(c.NONE)},o.unuseSkill=function(){this.toggleSkill(l.NONE)},o.nextTurn=function(){this.turn+=1,this.curTime=0,this.curUsingSkill=l.NONE,this.updateSeedByTurn(),this.updateBombByTurn(),this.updateIceByTurn(),this.updateBlockByTurn(),this.updateThornByTurn(),this.updateDisguiseByTurn(),h.emit(u.UPDATE_BOARD),h.emit(u.UPDATE_SEED_SHOW),h.emit(u.UPDATE_BOMB_SHOW),h.emit(u.UPDATE_ICE_SHOW),h.emit(u.UPDATE_BLOCK_SHOW),h.emit(u.UPDATE_THORN_SHOW),h.emit(u.UPDATE_DISGUISE_SHOW,this.turn%2==0?"O":"X"),h.emit(u.UPDATE_TURN_TEXT,this.turn%2==0?"O":"X"),this.oTurnReduceTime>0&&(this.oTurnReduceTime-=1),this.xTurnReduceTime>0&&(this.xTurnReduceTime-=1),h.emit(u.CLEAR_SKILL_USING),this.isPlayWithBot&&this.turn%2==1&&this.onInBotTurn()},o.isMovingBoard=function(){return this.boardMoving},o.setMovingBoard=function(t){this.boardMoving=t},o.selectedCellStart=function(t){this.curUsingSkill==l.RAIN&&(h.emit(u.CLEAR_PLACEHOLDER,this.curPlaceholder),this.curPlaceholder=this.getPlaceholder(c.SIZE_FIVE,t),h.emit(u.UPDATE_PLACEHODLER,this.curPlaceholder))},o.selectedCellChange=function(t){this.curUsingSkill==l.RAIN&&(h.emit(u.CLEAR_PLACEHOLDER,this.curPlaceholder),this.curPlaceholder=this.getPlaceholder(c.SIZE_FIVE,t),h.emit(u.UPDATE_PLACEHODLER,this.curPlaceholder))},o.selectedCellConfirm=function(t){if(this.boardMoving)this.boardMoving=!1;else switch(this.curUsingSkill){case l.SEED:this.setSeedAt(t)&&(this.toggleSkill(l.NONE),this.showPlaceHolder(c.NONE),h.emit(u.UPDATE_SEED_SHOW));break;case l.BOMB:this.setBombAt(t)?(this.toggleSkill(l.NONE),this.showPlaceHolder(c.NONE),h.emit(u.UPDATE_BOMB_SHOW)):h.emit(u.SHOW_TOAST,"Invalid bomb pos");break;case l.RAIN:console.log("CONFIRM CHANGE: ",t);var i=this.curPlaceholder;this.rainInRegion(i),h.emit(u.UPDATE_SEED_SHOW),h.emit(u.UPDATE_BOMB_SHOW),h.emit(u.UPDATE_BOARD),h.emit(u.CLEAR_PLACEHOLDER,this.curPlaceholder),this.curPlaceholder=[],this.toggleSkill(l.NONE);break;case l.FROZONE:this.setIceAt(t)?(this.toggleSkill(l.NONE),this.showPlaceHolder(c.NONE),h.emit(u.UPDATE_ICE_SHOW)):h.emit(u.SHOW_TOAST,"Invalid ice pos");break;case l.THORN:this.setThornAt(t)?(this.toggleSkill(l.NONE),this.showPlaceHolder(c.NONE),h.emit(u.UPDATE_THORN_SHOW)):h.emit(u.SHOW_TOAST,"Invalid thorn pos");break;default:this.addStone(t.x,t.y,this.turn%2==1)&&(this.checkWin(t,this.chessboard)?h.emit(u.END_GAME,this.turn):(this.nextTurn(),h.emit(u.UPDATE_BOARD)))}},o.addStone=function(t,i,e){var s=!1,r=e?"X":"O";if(""==this.chessboard[t][i]&&(this.chessboard[t][i]=r,s=!0),this.chessboard[t][i]==f.SEED){var o=this.findSeedAt(new n(t,i));o&&o.owner!=r&&(this.removeSeedAt(new n(t,i)),this.chessboard[t][i]=r,s=!0)}return s},o.resetBoad=function(){for(var t=0;t<this.sizeChess;t++)for(var i=0;i<this.sizeChess;i++)this.chessboard[i][t]="";this.seedList=[],this.bombList=[],this.iceList=[],this.blockList=[],this.thornList=[],this.disguiseList=[],h.emit(u.UPDATE_TURN_TEXT,"O"),h.emit(u.RESET_BOARD),this.turn=0,this.endCountTime(),this.startCountTime(),this.oTurnReduceTime=0,this.xTurnReduceTime=0,this.unuseSkill()},o.getBoardAtPos=function(t,i,e){return t<0||t>=this.sizeChess||i<0||i>=this.sizeChess?null:e[t][i]},o.checkWin=function(t,i,e){for(var s=0,n=t.x,r=t.x,o=t.y,h=e||this.getBoardAtPos(r,o,i);this.getBoardAtPos(n,o,i)==h;)s++,n++;for(n=r-1;this.getBoardAtPos(n,o,i)==h;)s++,n--;if(5==s)return!0;s=0;for(var u=o;this.getBoardAtPos(r,u,i)==h;)s++,u++;for(u=o-1;this.getBoardAtPos(r,u,i)==h;)s++,u--;if(5==s)return!0;for(u=r,n=o,s=0;this.getBoardAtPos(u,n,i)==h;)s++,u++,n++;for(u=r-1,n=o-1;this.getBoardAtPos(u,n,i)==h;)s++,u--,n--;if(5==s)return!0;for(u=r,n=o,s=0;this.getBoardAtPos(u,n,i)==h;)s++,u++,n--;for(u=r-1,n=o+1;this.getBoardAtPos(u,n,i)==h;)s++,u--,n++;return s>=5},o.resetSeedList=function(){this.seedList=[]},o.updateSeedByTurn=function(){for(var t=0;t<this.seedList.length;t++){var i=this.seedList[t];this.turn%2==0&&"O"==i.owner&&(i.livedTurn+=1),this.turn%2==1&&"X"==i.owner&&(i.livedTurn+=1),i.livedTurn>=a.seedGrownTurn&&(this.chessboard[i.pos.x][i.pos.y]=i.owner,this.checkWin(i.pos,this.chessboard)&&h.emit(u.END_GAME,this.turn))}this.seedList=this.seedList.filter((function(t){return t.livedTurn<a.seedGrownTurn}))},o.addRemoveSkillPos=function(t,i){var e={cellNum:t,skillOrder:i};this.removeSkillList.push(e)},o.useSeed=function(){this.toggleSkill(l.SEED),this.showPlaceHolder(c.EMPTY_CELLS)},o.setSeedAt=function(t){if(""!=this.chessboard[t.x][t.y])return!1;this.chessboard[t.x][t.y]=f.SEED;var i={pos:t,owner:this.turn%2==0?"O":"X",livedTurn:1};return this.seedList.push(i),!0},o.removeSeedAt=function(t){this.seedList=this.seedList.filter((function(i){return i.pos.x!=t.x&&i.pos.y!=t.y}))},o.findSeedAt=function(t){return this.seedList.find((function(i){return i.pos.x==t.x&&i.pos.y==t.y}))},o.removeSeed=function(t){for(var i=0;i<t.length;i++)this.chessboard[t[i].pos.x][t[i].pos.y]=""},o.useBomb=function(){this.toggleSkill(l.BOMB),this.showPlaceHolder(this.turn%2==0?c.X_CELLS:c.O_CELLS)},o.setBombAt=function(t){if(this.chessboard[t.x][t.y]!=(this.turn%2==0?"X":"O"))return!1;var i={pos:t,owner:this.turn%2==0?"O":"X",existTurn:1};return this.bombList.push(i),!0},o.updateBombByTurn=function(){for(var t=0;t<this.bombList.length;t++)if(this.bombList[t].existTurn+=1,this.bombList[t].existTurn>a.bombExplodeTurn){var i=this.bombList[t].pos;this.chessboard[i.x][i.y]=""}var e=this.bombList.filter((function(t){return t.existTurn>a.bombExplodeTurn}));this.bombList=this.bombList.filter((function(t){return t.existTurn<=a.bombExplodeTurn})),e.length>0&&h.emit(u.REMOVE_BOMB,e)},o.showPlaceHolder=function(t){h.emit(u.CLEAR_PLACEHOLDER,this.curPlaceholder),this.curPlaceholder=this.getPlaceholder(t),h.emit(u.UPDATE_PLACEHODLER,this.curPlaceholder)},o.getPlaceholder=function(t,i){var e=[];if(t==c.SIZE_FIVE)for(var s=i.y-2;s<=i.y+2;s++)for(var r=i.x-2;r<=i.x+2;r++)if(!(r<0||s<0||r>=this.sizeChess||s>=this.sizeChess)){var o=new n(r,s);e.push(o)}if(t==c.EMPTY_CELLS)for(var h=0;h<this.sizeChess;h++)for(var u=0;u<this.sizeChess;u++)if(""==this.chessboard[h][u]){var a=new n(h,u);e.push(a)}if(t==c.O_CELLS)for(var l=0;l<this.sizeChess;l++)for(var f=0;f<this.sizeChess;f++)if("O"==this.chessboard[l][f]){var d=new n(l,f);e.push(d)}if(t==c.X_CELLS)for(var T=0;T<this.sizeChess;T++)for(var g=0;g<this.sizeChess;g++)if("X"==this.chessboard[T][g]){var E=new n(T,g);e.push(E)}return e},o.useRain=function(){this.toggleSkill(l.RAIN)},o.rainInRegion=function(t){var i=this.getRect(t),e=this.turn%2==0?"O":"X",s=this.bombList.filter((function(t){return t.owner!=e&&i.contains(t.pos)}));s.length>0&&h.emit(u.REMOVE_BOMB,s);var n=this.seedList.filter((function(t){return t.owner!=e&&i.contains(t.pos)}));this.removeSeed(n),this.seedList=this.seedList.filter((function(t){return t.owner==e||!i.contains(t.pos)})),this.bombList=this.bombList.filter((function(t){return t.owner==e||!i.contains(t.pos)}));var r=this.bombList.filter((function(t){return t.owner!=e&&i.contains(t.pos)}));if(r.length>0){h.emit(u.REMOVE_THORN,r);for(var o=0;o<r.length;o++)this.chessboard[r[o].pos.x][r[o].pos.y]}this.thornList=this.thornList.filter((function(t){return t.owner==e||!i.contains(t.pos)}))},o.getRect=function(t){for(var i=new n(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),e=new n(Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER),s=0;s<t.length;s++)t[s].x<i.x&&(i.x=t[s].x),t[s].y<i.y&&(i.y=t[s].y),t[s].x>e.x&&(e.x=t[s].x),t[s].y>e.y&&(e.y=t[s].y);return new r(i.x,i.y,Math.abs(e.x-i.x),Math.abs(e.y-i.y))},o.useQuake=function(){this.toggleSkill(l.QUAKE),this.destroyChessman()},o.destroyChessman=function(){for(var t=a.quakeNumEachSide,i=a.quakeNumEachSide,e=[],s=0;s<this.bombList.length;s++){var r=this.bombList[s];if("O"==r.owner&&t>0){var o=this.bombList[s].pos;this.chessboard[o.x][o.y]="",e.push(r),t-=1}if("X"==r.owner&&i>0){var l=this.bombList[s].pos;this.chessboard[l.x][l.y]="",e.push(r),i-=1}}if(h.emit(u.REMOVE_BOMB,e),this.bombList=this.bombList.filter((function(t){return-1==e.indexOf(t)})),t>0||i>0){for(var c=[],f=[],d=0;d<this.sizeChess;d++)for(var T=0;T<this.sizeChess;T++)"X"==this.chessboard[d][T]&&c.push(new n(d,T)),"O"==this.chessboard[d][T]&&f.push(new n(d,T));for(;t>0&&c.length>0;){var g=Math.floor(Math.random()*c.length);this.chessboard[c[g].x][c[g].y]="",c.splice(g,1),t-=1}for(;i>0&&f.length>0;){var E=Math.floor(Math.random()*f.length);this.chessboard[f[E].x][f[E].y]="",f.splice(E,1),i-=1}}h.emit(u.UPDATE_BOARD)},o.useTime=function(){this.toggleSkill(l.TIME),this.turn%2!=0?this.oTurnReduceTime+=a.timeSkillTurnNum:this.xTurnReduceTime+=a.timeSkillTurnNum},o.useBlockage=function(){this.toggleSkill(l.BLOCKAGE),this.setBlock(),h.emit(u.UPDATE_BOARD),h.emit(u.UPDATE_BLOCK_SHOW)},o.setBlock=function(){for(var t=this.getBlockPos(),i=0;i<t.length;i++){var e=t[i],s={pos:t[i].clone(),owner:this.turn%2==0?"O":"X",existTurn:1};this.blockList.push(s),this.chessboard[e.x][e.y]=f.BLOCK}},o.getBlockPos=function(){var t=[];if(0==this.turn)for(var i=0;i<a.numBlockInBlokageSkill;i++){var e=Math.floor(Math.random()*this.sizeChess),s=Math.floor(Math.random()*this.sizeChess);t.push(new n(e,s))}else t=this.getBlockPosAround();return t},o.getBlockPosAround=function(){for(var t=[],i=a.numBlockInBlokageSkill,e=this.generateMove(this.chessboard),s=this.turn%2==0?"X":"O",n=[],r=0;r<e.length;r++)this.isNearTarget(s,e[r])&&n.push(e[r]);if(n.length>i)for(var o=function(){var i=Math.floor(Math.random()*n.length);-1==t.findIndex((function(t){return t.x==n[i].x&&t.y==n[i].y}))&&t.push(n[i].clone())};t.length<i;)o();if(n.length==i&&(t=n),n.length<i)for(var h=i-n.length,u=function(){var i=Math.floor(Math.random()*e.length);-1==t.findIndex((function(t){return t.x==e[i].x&&t.y==e[i].y}))&&t.push(e[i].clone())};t.length<h;)u();return t},o.generateMove=function(t){for(var i=[],e=this.sizeChess,s=0;s<e;s++)for(var r=0;r<e;r++)if(""==t[s][r]){if(s>0){if(r>0&&(""!=t[s-1][r-1]||""!=t[s][r-1])){var o=new n(s,r);i.push(o);continue}if(r<e-1&&(""!=t[s-1][r+1]||""!=t[s][r+1])){var h=new n(s,r);i.push(h);continue}if(""!=t[s-1][r]){var u=new n(s,r);i.push(u);continue}}if(s<e-1&&r>0){if(""!=t[s+1][r-1]||""!=t[s][r-1]){var a=new n(s,r);i.push(a);continue}if(r<e-1&&(t[s+1][r+1]||""!=t[s][r+1])){var l=new n(s,r);i.push(l);continue}if(""!=t[s+1][r]){var c=new n(s,r);i.push(c);continue}}}return i},o.isNearTarget=function(t,i){for(var e=i.x-1;e<=i.x+1;e++)for(var s=i.y-1;s<=i.y+1;s++)if(!(e<0||e>=this.sizeChess||s<0||s>=this.sizeChess)&&this.chessboard[e][s]==t)return!0;return!1},o.updateBlockByTurn=function(){for(var t=0;t<this.blockList.length;t++){var i=this.blockList[t];if(i.existTurn+=1,i.existTurn>a.blockExistTurn){var e=i.pos;this.chessboard[e.x][e.y]=""}}this.blockList=this.blockList.filter((function(t){return t.existTurn<=a.blockExistTurn}))},o.useFrozone=function(){this.toggleSkill(l.FROZONE),this.showPlaceHolder(this.turn%2==0?c.X_CELLS:c.O_CELLS)},o.setIceAt=function(t){var i=this.chessboard[t.x][t.y];if(i!=(this.turn%2==0?"X":"O"))return!1;var e={pos:t,owner:this.turn%2==0?"O":"X",existTurn:1};return this.chessboard[t.x][t.y]=i+f.ICE,this.iceList.push(e),!0},o.updateIceByTurn=function(){for(var t=0;t<this.iceList.length;t++)if(this.iceList[t].existTurn+=1,this.iceList[t].existTurn>a.iceExistTurn){var i=this.iceList[t].pos;this.chessboard[i.x][i.y]=this.chessboard[i.x][i.y].replace(f.ICE,"")}var e=this.iceList.filter((function(t){return t.existTurn>a.iceExistTurn}));this.iceList=this.iceList.filter((function(t){return t.existTurn<=a.iceExistTurn})),e.length>0&&h.emit(u.REMOVE_ICE,e)},o.useThorn=function(){this.toggleSkill(l.THORN),this.showPlaceHolder(c.EMPTY_CELLS)},o.setThornAt=function(t){if(""!=this.chessboard[t.x][t.y])return!1;this.chessboard[t.x][t.y]=f.THORN;var i={pos:t,owner:this.turn%2==0?"O":"X",existTurn:1};return this.thornList.push(i),!0},o.updateThornByTurn=function(){if(0!=this.thornList.length){for(var t=0;t<this.thornList.length;t++){var i=this.thornList[t];if(i.existTurn+=1,i.existTurn<=a.thornExistTurn){var e=this.getNextThornMove(i).clone();this.chessboard[i.pos.x][i.pos.y]="",i.pos=e.clone(),this.chessboard[e.x][e.y]=f.THORN}else this.chessboard[i.pos.x][i.pos.y]=""}var s=this.thornList.filter((function(t){return t.existTurn>a.thornExistTurn}));this.thornList=this.thornList.filter((function(t){return t.existTurn<=a.thornExistTurn})),s.length>0&&h.emit(u.REMOVE_THORN,s)}},o.getNextThornMove=function(t){var i=this.getThornMoveableList(t.pos);return this.calculateNextMove(t,i)},o.getThornMoveableList=function(t){for(var i=[],e=t.x-5;e<=t.x+5;e++)for(var s=t.y-5;s<=t.y+5;s++)e<0||e>=this.sizeChess||s<0||s>=this.sizeChess||e==t.x&&s==t.y||i.push(new n(e,s));return i},o.calculateNextMove=function(t,i){for(var e,s=[],n=[],r=[],o=t.existTurn<=2,h=0;h<i.length;h++){var u=i[h],l=this.chessboard[u.x][u.y];""==l?s.push(u.clone()):l!=t.owner&&""!=l?n.push(u.clone()):l==f.BLOCK&&r.push(u.clone())}if(o&&s.length>0){e=s[Math.floor(Math.random()*s.length)].clone()}else{var c,d=s.length>0?1:0,T=n.length>0?1:0,g=r.length>0?1:0,E=T*a.thornMoveRate[0],m=g*a.thornMoveRate[1],v=E+m+d*a.thornMoveRate[2],L=Math.random()*v;e=(c=L<E?n:L>=E&&L<E+m?r:s)[Math.floor(Math.random()*c.length)].clone()}return e},o.useDisguise=function(){this.toggleSkill(l.DISGUISE),this.startDisguise(),h.emit(u.UPDATE_DISGUISE_SHOW,this.turn%2==0?"O":"X")},o.startDisguise=function(){var t=this,i=this.turn%2==0?"O":"X",e=this.getPosHasValue(i);if(0!=e.length)if(e.length<=a.disguiseNum){if(0==this.disguiseList.length)for(var s=0;s<e.length;s++){var r={pos:new n(e[s].x,e[s].y),owner:i,existTurn:1};this.disguiseList.push(r)}else for(var o=function(s){if(-1!=t.disguiseList.findIndex((function(t){return t.pos.x==e[s].x&&t.pos.y==e[s].y}))){t.disguiseList.find((function(t){return t.pos.x==e[s].x&&t.pos.y==e[s].y})).existTurn=1}else{var r={pos:new n(e[s].x,e[s].y),owner:i,existTurn:1};t.disguiseList.push(r)}},l=0;l<e.length;l++)o(l);h.emit(u.UPDATE_BOARD)}else if(e.length-this.disguiseList.length>=a.disguiseNum)if(e.length-this.disguiseList.length==a.disguiseNum)for(var c=function(s){if(-1==t.disguiseList.findIndex((function(t){return t.pos.x==e[s].x&&t.pos.x==e[s].y}))){var r={pos:new n(e[s].x,e[s].y),owner:i,existTurn:1};t.disguiseList.push(r)}},f=0;f<e.length;f++)c(f);else{var d=0;if((e=e.filter((function(i){return-1==t.disguiseList.findIndex((function(t){return t.pos.x==i.x&&t.pos.y==i.y}))}))).length<=a.disguiseNum){for(var T=0;T<e.length;T++){var g={pos:new n(e[T].x,e[T].y),owner:i,existTurn:1};this.disguiseList.push(g)}return}for(var E=function(){var s=Math.floor(Math.random()*e.length),r=e[s];if(-1==t.disguiseList.findIndex((function(t){return t.pos.x==r.x&&t.pos.y==r.y}))){var o={pos:new n(r.x,r.y),owner:i,existTurn:1};t.disguiseList.push(o),d+=1}};d<a.disguiseNum;)E()}else for(var m=function(s){if(-1==t.disguiseList.findIndex((function(t){return t.pos.x==e[s].x&&t.pos.y==e[s].y}))){var r={pos:new n(e[s].x,e[s].y),owner:i,existTurn:1};t.disguiseList.push(r)}},v=0;v<e.length;v++)m(v);else h.emit(u.SHOW_TOAST,"You must have at least 1 chessman to disguise")},o.getPosHasValue=function(t){for(var i=[],e=0;e<this.sizeChess;e++)for(var s=0;s<this.sizeChess;s++)this.chessboard[e][s]==t&&i.push(new n(e,s));return i},o.updateDisguiseByTurn=function(){if(0!=this.disguiseList.length){for(var t=0;t<this.disguiseList.length;t++){this.disguiseList[t].existTurn+=1}var i=this.disguiseList.filter((function(t){return t.existTurn>a.disguiseExistTurn}));h.emit(u.REMOVE_DISGUISE,i),this.disguiseList=this.disguiseList.filter((function(t){return t.existTurn<=a.disguiseExistTurn}))}},o.startPlayWithBot=function(){this.isPlayWithBot=!0},o.onInBotTurn=function(){this.blockUserAction(),this.botUseSkill();var t=d._instance.calculateNextMove();this.selectedCellStart(t)},o.blockUserAction=function(){},o.botUseSkill=function(){},e(s,null,[{key:"_intance",get:function(){return s.instance||(s.instance=new s),s.instance}}]),s}(o)).instance=null,s._RF.pop()}}}));

System.register("chunks:///_virtual/SpawnObject.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,c,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t._decorator,r=t.Component}],execute:function(){var o;n._RF.push({},"bafeec+/RNLSYqbhmP2HX2C","SpawnObject",void 0);var u=c.ccclass;c.property,t("SpawnObject",u("SpawnObject")(o=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var c=n.prototype;return c.start=function(){},c.update=function(t){},n}(r))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/Toast.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventMgr.ts"],(function(t){var e,o,n,i,r,a,s,c,u,l,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Node,c=t.Label,u=t.Component},function(t){l=t.default,p=t.EventName}],execute:function(){var f,h,d,v,T,y,b;r._RF.push({},"37cddtsfLxDhp8YLDzDqfQw","Toast",void 0);var g=a.ccclass,w=a.property;t("Toast",(f=g("Toast"),h=w(s),d=w(c),f((y=e((T=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"toastNode",y,i(e)),n(e,"toastTxt",b,i(e)),e}o(e,t);var r=e.prototype;return r.start=function(){l.on(p.SHOW_TOAST,this.showToast,this)},r.update=function(t){},r.showToast=function(t){var e=this;this.toastTxt.string=t,this.toastNode.active=!0,this.scheduleOnce((function(){e.toastNode.active=!1}),2)},e}(u)).prototype,"toastNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(T.prototype,"toastTxt",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=T))||v));r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});