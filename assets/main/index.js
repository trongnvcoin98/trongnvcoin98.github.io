System.register("chunks:///_virtual/BattleScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MainLogic.ts","./EventMgr.ts","./Define.ts"],(function(i){var e,t,n,l,r,o,c,a,s,u,k,S,g,h,p,f,b,m,y;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,n=i.initializerDefineProperty,l=i.assertThisInitialized},function(i){r=i.cclegacy,o=i._decorator,c=i.Button,a=i.Node,s=i.Label,u=i.tween,k=i.UIOpacity,S=i.Component},function(i){g=i.MainLogic},function(i){h=i.default,p=i.EventName},function(i){f=i.default,b=i.SkillType,m=i.SkillName,y=i.SkillDes}],execute:function(){var d,B,N,O,E,T,I,C,z,w,A,L,v,_,R,U,X,D,K,M,x,F,G,Q,Z,P,q,H,j,Y,J,V,W,$,ii,ei,ti,ni,li,ri,oi,ci,ai,si,ui,ki,Si,gi,hi,pi,fi,bi,mi,yi,di,Bi,Ni,Oi,Ei,Ti,Ii,Ci,zi,wi,Ai,Li,vi,_i,Ri;r._RF.push({},"52d44wiXpBMnYyOHzLOktLI","BattleScreen",void 0);var Ui=o.ccclass,Xi=o.property;i("BattleScreen",(d=Ui("BattleScreen"),B=Xi(c),N=Xi(c),O=Xi(a),E=Xi(s),T=Xi(s),I=Xi(s),C=Xi({group:{name:"SKILL",style:"section"}}),z=Xi(c),w=Xi({group:{name:"SKILL",style:"section"}}),A=Xi(c),L=Xi({group:{name:"SKILL",style:"section"}}),v=Xi(c),_=Xi({group:{name:"SKILL",style:"section"}}),R=Xi(c),U=Xi({group:{name:"SKILL",style:"section"}}),X=Xi(c),D=Xi({group:{name:"SKILL",style:"section"}}),K=Xi(c),M=Xi({group:{name:"SKILL",style:"section"}}),x=Xi(c),F=Xi({group:{name:"SKILL",style:"section"}}),G=Xi(c),Q=Xi({group:{name:"Skill Info",style:"section"}}),Z=Xi(a),P=Xi({group:{name:"Skill Info",style:"section"}}),q=Xi(a),H=Xi({group:{name:"Skill Info",style:"section"}}),j=Xi(s),Y=Xi({group:{name:"Skill Info",style:"section"}}),J=Xi(s),V=Xi({group:{name:"Skill Info",style:"section"}}),W=Xi(s),$=Xi({group:{name:"Skill Info",style:"section"}}),ii=Xi(s),ei=Xi({group:{name:"Skill Info",style:"section"}}),ti=Xi(s),ni=Xi({group:{name:"Skill Info",style:"section"}}),li=Xi(s),ri=Xi({group:{name:"Skill Info",style:"section"}}),oi=Xi(c),ci=Xi({group:{name:"Skill Info",style:"section"}}),ai=Xi(c),d((ki=e((ui=function(i){function e(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=i.call.apply(i,[this].concat(r))||this,n(e,"resetBtn",ki,l(e)),n(e,"replayBtn",Si,l(e)),n(e,"resultNotiNode",gi,l(e)),n(e,"resultText",hi,l(e)),n(e,"turnText",pi,l(e)),n(e,"usingSkill",fi,l(e)),n(e,"seedSkill",bi,l(e)),n(e,"bombSkill",mi,l(e)),n(e,"noSkill",yi,l(e)),n(e,"rainSkill",di,l(e)),n(e,"quakeSkill",Bi,l(e)),n(e,"timeSkill",Ni,l(e)),n(e,"blockageSkill",Oi,l(e)),n(e,"frozoneSkill",Ei,l(e)),n(e,"OActiveBg",Ti,l(e)),n(e,"XActiveBg",Ii,l(e)),n(e,"OSkillName",Ci,l(e)),n(e,"OSkillDes",zi,l(e)),n(e,"XSkillName",wi,l(e)),n(e,"XSkillDes",Ai,l(e)),n(e,"OTime",Li,l(e)),n(e,"XTime",vi,l(e)),n(e,"leftUseSkillBtn",_i,l(e)),n(e,"rightUseSkillBtn",Ri,l(e)),e.curSelectSkill=null,e}t(e,i);var r=e.prototype;return r.start=function(){this.resetBtn.node.on("click",this.onResetClick,this),this.replayBtn.node.on("click",this.onReplayClick,this),this.seedSkill.node.on("click",this.onSeedClick,this),this.bombSkill.node.on("click",this.onBombClick,this),this.noSkill.node.on("click",this.onNoSkillClick,this),this.rainSkill.node.on("click",this.onRainClick,this),this.quakeSkill.node.on("click",this.onQuakeClick,this),this.timeSkill.node.on("click",this.onTimeClick,this),this.blockageSkill.node.on("click",this.onBlockageClick,this),this.frozoneSkill.node.on("click",this.onFrozoneClick,this),this.leftUseSkillBtn.node.on("click",this.onOUsingSkillClick,this),this.rightUseSkillBtn.node.on("click",this.onXUsingSkillClick,this),h.on(p.START_GAME,this.onStartGame,this),h.on(p.END_GAME,this.onEndGame,this),h.on(p.UPDATE_TURN_TEXT,this.updateTurnText,this),h.on(p.CLEAR_SKILL_USING,this.clearSkillUsing,this)},r.update=function(i){this.OTime.node.active=g._intance.turn%2==0,this.XTime.node.active=g._intance.turn%2!=0;var e=g._intance.turn%2==0?this.OTime:this.XTime;if((g._intance.turn%2==0?g._intance.oTurnReduceTime:g._intance.xTurnReduceTime)>0){var t=Math.ceil(f.turnTime/2);e.string=(t-g._intance.curTime).toString()}else e.string=(f.turnTime-g._intance.curTime).toString()},r.onResetClick=function(){g._intance.resetBoad()},r.onReplayClick=function(){this.resultNotiNode.active=!1,g._intance.resetBoad()},r.onOUsingSkillClick=function(){switch(this.curSelectSkill){case b.SEED:g._intance.useSeed();break;case b.RAIN:g._intance.useRain();break;case b.BLOCKAGE:g._intance.useBlockage();break;case b.FROZONE:g._intance.useFrozone()}this.clearUsingSkillText()},r.onXUsingSkillClick=function(){switch(this.curSelectSkill){case b.QUAKE:g._intance.useQuake();break;case b.BOMB:g._intance.useBomb()}this.clearUsingSkillText()},r.onSeedClick=function(){this.curSelectSkill=b.SEED,this.updateSkillName(this.curSelectSkill)},r.onBombClick=function(){this.curSelectSkill=b.BOMB,this.updateSkillName(this.curSelectSkill)},r.onRainClick=function(){this.curSelectSkill=b.RAIN,this.updateSkillName(this.curSelectSkill)},r.onQuakeClick=function(){this.curSelectSkill=b.QUAKE,this.updateSkillName(this.curSelectSkill)},r.onTimeClick=function(){this.curSelectSkill=b.TIME,this.updateSkillName(this.curSelectSkill)},r.onBlockageClick=function(){this.curSelectSkill=b.BLOCKAGE,this.updateSkillName(this.curSelectSkill)},r.onFrozoneClick=function(){this.curSelectSkill=b.FROZONE,this.updateSkillName(this.curSelectSkill)},r.clearUsingSkillText=function(){this.curSelectSkill=b.NONE,this.updateSkillName(this.curSelectSkill)},r.onStartGame=function(){this.flickerPlayerBg()},r.onEndGame=function(i){this.resultText.string=i%2==0?"O win":"X win",this.resultNotiNode.active=!0},r.updateSkillName=function(i){var e=g._intance.turn%2==0;if((-1!=f.xSkills.findIndex((function(e){return e==i}))||e)&&(-1!=f.oSkills.findIndex((function(e){return e==i}))||!e)){var t=e?this.OSkillName:this.XSkillName,n=e?this.OSkillDes:this.XSkillDes;switch(i){case b.SEED:this.usingSkill.string="Skill:"+m.SEED,t.string=m.SEED,n.string=y.SEED;break;case b.BOMB:this.usingSkill.string="Skill:"+m.BOMB,t.string=m.BOMB,n.string=y.BOMB;break;case b.RAIN:this.usingSkill.string="Skill:"+m.RAIN,t.string=m.RAIN,n.string=y.RAIN;break;case b.QUAKE:this.usingSkill.string="Skill:"+m.QUAKE,t.string=m.QUAKE,n.string=y.QUAKE;break;case b.TIME:this.usingSkill.string="Skill:"+m.TIME,t.string=m.TIME,n.string=y.TIME;break;case b.BLOCKAGE:this.usingSkill.string="Skill:"+m.BLOCKAGE,t.string=m.BLOCKAGE,n.string=y.BLOCKAGE;break;case b.FROZONE:this.usingSkill.string="Skill:"+m.FROZONE,t.string=m.FROZONE,n.string=y.FROZONE;break;case b.NONE:}}},r.updateTurnText=function(i){this.turnText.string=i,this.OActiveBg.active="O"==i,this.XActiveBg.active="X"==i},r.clearSkillUsing=function(){this.OSkillName.string="----------------",this.OSkillDes.string="-------",this.XSkillName.string="----------------",this.XSkillDes.string="-------"},r.flickerPlayerBg=function(){u(this.OActiveBg.getComponent(k)).to(.5,{opacity:10}).to(.5,{opacity:255}).union().repeatForever().start(),u(this.XActiveBg.getComponent(k)).to(.5,{opacity:10}).to(.5,{opacity:255}).union().repeatForever().start()},r.onNoSkillClick=function(){g._intance.unuseSkill()},e}(S)).prototype,"resetBtn",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Si=e(ui.prototype,"replayBtn",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gi=e(ui.prototype,"resultNotiNode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hi=e(ui.prototype,"resultText",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pi=e(ui.prototype,"turnText",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fi=e(ui.prototype,"usingSkill",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bi=e(ui.prototype,"seedSkill",[C,z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mi=e(ui.prototype,"bombSkill",[w,A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yi=e(ui.prototype,"noSkill",[L,v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),di=e(ui.prototype,"rainSkill",[_,R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bi=e(ui.prototype,"quakeSkill",[U,X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ni=e(ui.prototype,"timeSkill",[D,K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oi=e(ui.prototype,"blockageSkill",[M,x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ei=e(ui.prototype,"frozoneSkill",[F,G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ti=e(ui.prototype,"OActiveBg",[Q,Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ii=e(ui.prototype,"XActiveBg",[P,q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ci=e(ui.prototype,"OSkillName",[H,j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zi=e(ui.prototype,"OSkillDes",[Y,J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wi=e(ui.prototype,"XSkillName",[V,W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ai=e(ui.prototype,"XSkillDes",[$,ii],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Li=e(ui.prototype,"OTime",[ei,ti],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vi=e(ui.prototype,"XTime",[ni,li],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_i=e(ui.prototype,"leftUseSkillBtn",[ri,oi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ri=e(ui.prototype,"rightUseSkillBtn",[ci,ai],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),si=ui))||si));r._RF.pop()}}}));

System.register("chunks:///_virtual/Bot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MainLogic.ts","./EventMgr.ts"],(function(e){var n,t,r,i,s,c;return{setters:[function(e){n=e.createClass},function(e){t=e.cclegacy,r=e.Vec2},function(e){i=e.MainLogic},function(e){s=e.default,c=e.EventName}],execute:function(){t._RF.push({},"52cfbYjF8BO47PUKyaqK0A2","Bot",void 0),e("Bot",function(){function e(){this.curChessboard=[],this.sizeChess=0,this.WIN_SCORE=1e8}var t=e.prototype;return t.calculateNextMove=function(){new r,i._intance.turn;this.curChessboard=i._intance.chessboard;var e=this.searchWinMove(this.curChessboard);if(null!=e)return console.log("WIN MOVE: ",e),e;var n=this.generateMove(this.curChessboard);return n[Math.floor(Math.random()*n.length)]},t.searchWinMove=function(e){var n=this.generateMove(e),t=i._intance.turn%2==0?"O":"X";console.log("VALUE CHEK ",t),s.emit(c.CLEAR_PLACEHOLDER),s.emit(c.UPDATE_PLACEHODLER,n);var r=[];this.sizeChess=i._intance.sizeChess,e.forEach((function(e){return r.push(Object.assign({},e))}));for(var u=0;u<n.length;u++){var o=n[u];r[o.x][o.y]=t,e.forEach((function(e){return r.push(Object.assign({},e))}))}return null},t.generateMove=function(e){for(var n=[],t=i._intance.sizeChess,s=0;s<t;s++)for(var c=0;c<t;c++)if(""==e[s][c]){if(s>0){if(c>0&&(""!=e[s-1][c-1]||""!=e[s][c-1])){var u=new r(s,c);n.push(u);continue}if(c<t-1&&(""!=e[s-1][c+1]||""!=e[s][c+1])){var o=new r(s,c);n.push(o);continue}if(""!=e[s-1][c]){var a=new r(s,c);n.push(a);continue}}if(s<t-1&&c>0){if(""!=e[s+1][c-1]||""!=e[s][c-1]){var h=new r(s,c);n.push(h);continue}if(c<t-1&&(e[s+1][c+1]||""!=e[s][c+1])){var f=new r(s,c);n.push(f);continue}if(""!=e[s+1][c]){var v=new r(s,c);n.push(v);continue}}}return n},t.getBoardScore=function(e){return 0},t.evaluateHoz=function(e,n,t){for(var r=[0,2,0],i=0;i<e.length;i++)for(var s=0;s<e.length;s++)this.evaluateDir(e,i,s,n,t,r)},t.evaluateDir=function(e,n,t,r,i,s){e[n][t]==(r?"X":"O")?s[0]+=1:""==e[n][t]?(s[0]>0&&(s[1]-=1,s[2]+=this.getConsecutiveSetScore(s[0],s[1],r==i),s[0]=0),s[1]=1):s[0]>0?(s[2]+=this.getConsecutiveSetScore(s[0],s[1],r==i),s[0]=0,s[1]=2):s[1]=2},t.evaluateDirAfterOnePass=function(e,n,t){e[0]>0&&(e[2]+=this.getConsecutiveSetScore(e[0],e[1],n==t)),e[0]=0,e[1]=2},t.getConsecutiveSetScore=function(e,n,t){var r=1e6;if(2==n&&e<5)return 0;switch(e){case 5:return this.WIN_SCORE;case 4:return t?r:0==n?25e4:200;case 3:return 0==n?t?5e4:200:t?10:5;case 2:return 0==n?t?7:5:3;case 1:return 1}return 0},n(e,null,[{key:"_instance",get:function(){return e.instance||(e.instance=new e),e.instance}}]),e}()).instance=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/Cell.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MainLogic.ts","./Define.ts"],(function(e){var t,i,n,o,l,r,u,c,a,s,h,d,b,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){l=e.cclegacy,r=e._decorator,u=e.Node,c=e.Label,a=e.Vec2,s=e.Color,h=e.UITransform,d=e.Component},function(e){b=e.MainLogic},function(e){f=e.SkillType}],execute:function(){var v,p,T,g,k,y,C,S,m,x,w,E,M,z,F,N,O,V,H,_,D,B,I,L,U,R,A;l._RF.push({},"6b259kWNDxGNJYbcJab93qi","Cell",void 0);var P=r.ccclass,X=r.property;e("Cell",(v=P("Cell"),p=X(u),T=X(c),g=X(u),k=X(c),y=X(c),C=X(u),S=X(c),m=X(u),x=X(c),w=X(u),E=X(c),M=X(u),v((N=t((F=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];return t=e.call.apply(e,[this].concat(l))||this,n(t,"valueNode",N,o(t)),n(t,"valueText",O,o(t)),n(t,"seedSkill",V,o(t)),n(t,"seedTurn",H,o(t)),n(t,"seedOwner",_,o(t)),n(t,"bombSkill",D,o(t)),n(t,"bombTurn",B,o(t)),n(t,"iceSkill",I,o(t)),n(t,"iceTurn",L,o(t)),n(t,"blockSkill",U,o(t)),n(t,"blockTurn",R,o(t)),n(t,"placeHolder",A,o(t)),t.pos=new a,t.onClickFun=function(){},t.onMoveTouchFun=function(){},t.onEndTouchFun=function(){},t.onMoveBoardFun=function(){},t.placeholderTween=void 0,t.deltaVec=new a,t}i(t,e);var l=t.prototype;return l.start=function(){this.resetCell(),this.node.on(u.EventType.TOUCH_START,this.onCellClick,this),this.node.on(u.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(u.EventType.TOUCH_END,this.touchEnd,this),this.node.on(u.EventType.TOUCH_CANCEL,this.touchCancel,this)},l.update=function(e){},l.setup=function(e,t,i){this.pos=e,this.onClickFun=t,""!=i?(this.valueText.string=i,this.valueNode.active=!0):(this.valueText.string="",this.valueNode.active=!1)},l.setTouchAction=function(e,t,i){this.onClickFun=e,this.onMoveTouchFun=t,this.onEndTouchFun=i},l.setMoveBoardAction=function(e){this.onMoveBoardFun=e},l.updateValue=function(e){if(this.valueText.string=e,this.valueNode.active="X"==e||"O"==e,this.valueText.color="X"==e?s.RED:s.GREEN,this.seedSkill.active="SEED"==e,this.blockSkill.active="BLOCK"==e,-1!=e.indexOf("+ICE")){var t=e.replace("+ICE","");this.valueText.string=t,this.valueNode.active="X"==t||"O"==t,this.valueText.color="X"==t?s.RED:s.GREEN}},l.wasUsed=function(){return this.valueNode.active},l.getValueText=function(){return this.valueText.string},l.resetCell=function(){this.valueNode.active=!1,this.valueText.string="",this.seedSkill.active=!1,this.bombSkill.active=!1},l.onCellClick=function(){this.onClickFun(this.pos)},l.updateSeed=function(e){this.seedSkill.active=!0,this.seedTurn.string=e.livedTurn.toString(),this.seedOwner.string=e.owner.toString()},l.updateBomb=function(e){this.bombSkill.active=!0,this.bombTurn.string=e.toString()},l.removeBomb=function(){this.bombSkill.active=!1},l.updateIce=function(e){this.iceSkill.active=!0,this.iceTurn.string=e.toString()},l.updateBlock=function(e){this.blockSkill.active=!0,this.blockTurn.string=e.toString()},l.removeIce=function(){this.iceSkill.active=!1},l.activePlaceHolder=function(){this.placeHolder.active=!0},l.deactivePlaceHolder=function(){this.placeHolder.active=!1},l.touchMove=function(e){if(b._intance.curUsingSkill==f.RAIN){var t=this.node.getWorldPosition(),i=this.node.getComponent(h).width,n=new a;n.x=e.getUILocation().x-t.x,n.y=e.getUILocation().y-t.y;var o=Math.floor(Math.abs(n.x/i)),l=Math.floor(Math.abs(n.y/i));o=n.x<0?-o:o,l=n.y<0?l:-l;var r=n.x%i,u=n.y%i;if(n.x<0&&r<-i/2&&(o-=1),n.x>0&&r>i/2&&(o+=1),n.y<0&&u<i/2&&(l+=1),n.y>0&&u>i/2&&(l-=1),this.deltaVec=new a(this.pos.x+o,this.pos.y+l),this.deltaVec.x>=b._intance.sizeChess||this.deltaVec.y>=b._intance.sizeChess||this.deltaVec.x<0||this.deltaVec.y<0)return;this.onMoveTouchFun(this.deltaVec)}else this.onMoveBoardFun(e.getDelta())},l.touchCancel=function(){this.onEndTouchFun(this.deltaVec)},l.touchEnd=function(){this.onEndTouchFun(this.pos)},t}(d)).prototype,"valueNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(F.prototype,"valueText",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(F.prototype,"seedSkill",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(F.prototype,"seedTurn",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(F.prototype,"seedOwner",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(F.prototype,"bombSkill",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(F.prototype,"bombTurn",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(F.prototype,"iceSkill",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(F.prototype,"iceTurn",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(F.prototype,"blockSkill",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(F.prototype,"blockTurn",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(F.prototype,"placeHolder",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=F))||z));l._RF.pop()}}}));

System.register("chunks:///_virtual/Chessboard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Cell.ts","./EventMgr.ts","./MainLogic.ts"],(function(e){var t,o,n,i,s,r,c,a,l,h,u,d,p,v,f,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){s=e.cclegacy,r=e._decorator,c=e.Prefab,a=e.Node,l=e.instantiate,h=e.Vec2,u=e.Vec3,d=e.Component},function(e){p=e.Cell},function(e){v=e.default,f=e.EventName},function(e){C=e.MainLogic}],execute:function(){var b,m,_,g,E,P,B;s._RF.push({},"3d6aeVTvgFHbqdOXmZ05VwK","Chessboard",void 0);var T=r.ccclass,y=r.property;e("Chessboard",(b=T("Chessboard"),m=y(c),_=y(a),b((P=t((E=function(e){function t(){for(var t,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s))||this,n(t,"cellPrefab",P,i(t)),n(t,"chessboardRender",B,i(t)),t.cells=[],t.curTouch=void 0,t.curPlaceHolder=[],t}o(t,e);var s=t.prototype;return s.start=function(){v.on(f.UPDATE_BOARD,this.updateBoard,this),v.on(f.INIT_BOARD,this.initChessboard,this),v.on(f.UPDATE_SEED_SHOW,this.updateSeed,this),v.on(f.UPDATE_BOMB_SHOW,this.updateBomb,this),v.on(f.UPDATE_ICE_SHOW,this.updateIce,this),v.on(f.UPDATE_BLOCK_SHOW,this.updateBlock,this),v.on(f.RESET_BOARD,this.resetChessboard,this),v.on(f.REMOVE_BOMB,this.removeBomb,this),v.on(f.REMOVE_ICE,this.removeIce,this),v.on(f.UPDATE_PLACEHODLER,this.updatePlaceholder,this),v.on(f.CLEAR_PLACEHOLDER,this.clearPlaceholder,this),C._intance.initDone&&this.initChessboard()},s.update=function(e){},s.initChessboard=function(){this.cells=[];for(var e=0;e<C._intance.sizeChess;e++)for(var t=0;t<C._intance.sizeChess;t++){var o=l(this.cellPrefab);o.getComponent(p).setup(new h(t,e),this.onCellClick.bind(this),""),o.getComponent(p).setTouchAction(this.onCellClick.bind(this),this.onCellMoveTouch.bind(this),this.onCellEndTouch.bind(this)),o.getComponent(p).setMoveBoardAction(this.onMoveBoard.bind(this)),this.cells.push(o),this.chessboardRender.addChild(o)}},s.resetChessboard=function(){this.cells.forEach((function(e){return e.getComponent(p).resetCell()}))},s.onCellClick=function(e){this.curTouch=e,C._intance.selectedCellStart(e)},s.onCellEndTouch=function(e){C._intance.selectedCellConfirm(e)},s.onCellMoveTouch=function(e){this.curTouch!=e&&C._intance.selectedCellChange(e)},s.convertXYtoNum=function(e,t){return e+C._intance.sizeChess*t},s.updateBoard=function(){for(var e=0;e<C._intance.sizeChess;e++)for(var t=0;t<C._intance.sizeChess;t++){var o=C._intance.chessboard[t][e];this.cells[this.convertXYtoNum(t,e)].getComponent(p).updateValue(o)}},s.updateSeed=function(){for(var e=C._intance.seedList,t=0;t<e.length;t++){var o=e[t],n=this.convertXYtoNum(o.pos.x,o.pos.y);this.cells[n].getComponent(p).updateSeed(o)}},s.updateBomb=function(){for(var e=C._intance.bombList,t=0;t<e.length;t++){var o=e[t],n=this.convertXYtoNum(o.pos.x,o.pos.y);this.cells[n].getComponent(p).updateBomb(o.existTurn)}},s.removeBomb=function(e){for(var t=0;t<e.length;t++){var o=e[t],n=this.convertXYtoNum(o.pos.x,o.pos.y);this.cells[n].getComponent(p).removeBomb()}},s.updateIce=function(){for(var e=C._intance.iceList,t=0;t<e.length;t++){var o=e[t],n=this.convertXYtoNum(o.pos.x,o.pos.y);this.cells[n].getComponent(p).updateIce(o.existTurn)}},s.removeIce=function(e){for(var t=0;t<e.length;t++){var o=e[t],n=this.convertXYtoNum(o.pos.x,o.pos.y);this.cells[n].getComponent(p).removeIce()}},s.updateBlock=function(){for(var e=C._intance.blockList,t=0;t<e.length;t++){var o=e[t],n=this.convertXYtoNum(o.pos.x,o.pos.y);this.cells[n].getComponent(p).updateBlock(o.existTurn)}},s.updatePlaceholder=function(e){this.curPlaceHolder=e;for(var t=0;t<e.length;t++){var o=this.convertXYtoNum(e[t].x,e[t].y);this.cells[o].getComponent(p).activePlaceHolder()}},s.clearPlaceholder=function(e){for(var t=e||this.curPlaceHolder,o=0;o<t.length;o++){var n=this.convertXYtoNum(t[o].x,t[o].y);this.cells[n].getComponent(p).deactivePlaceHolder()}},s.onMoveBoard=function(e){C._intance.isMovingBoard=!0;var t=this.chessboardRender.position.clone();this.chessboardRender.setPosition(new u(t.x+e.x,t.y+e.y)),C._intance.chessboardPos=this.chessboardRender.position.clone()},t}(d)).prototype,"cellPrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(E.prototype,"chessboardRender",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=E))||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/Define.ts",["cc"],(function(n){var t,c;return{setters:[function(n){t=n.cclegacy,c=n._decorator}],execute:function(){t._RF.push({},"5eccc6olCdFEIs4PDs9Pgf3","Define",void 0);c.ccclass,c.property;var E=n("SkillType",function(n){return n.NONE="NONE",n.SEED="SEED",n.BOMB="BOMB",n.RAIN="RAIN",n.QUAKE="QUAKE",n.TIME="TIME",n.BLOCKAGE="BLOCKAGE",n.FROZONE="FROZONE",n}({}));n("default",new function(){this.seedGrownTurn=3,this.bombExplodeTurn=3,this.quakeNumEachSide=2,this.turnTime=25,this.timeSkillTurnNum=5,this.iceExistTurn=3,this.numBlockInBlokageSkill=3,this.blockExistTurn=3,this.oSkills=[E.SEED,E.RAIN,E.BLOCKAGE,E.FROZONE],this.xSkills=[E.BOMB,E.QUAKE]}),n("ObjectType",function(n){return n.SEED="SEED",n}({})),n("PlaceholderType",function(n){return n.NONE="NONE",n.SIZE_FIVE="SIZE_FIVE",n.X_CELLS="X_CELLS",n.O_CELLS="O_CELLS",n.EMPTY_CELLS="EMPTY_CELLS",n}({})),n("SkillName",function(n){return n.SEED="Hạt mầm hy vọng",n.BOMB="Bom hẹn lượt",n.RAIN="Cơn mưa cuốn sạch",n.QUAKE="Động đất",n.TIME="Giảm thời gian",n.BLOCKAGE="Chướng ngại vật",n.FROZONE="Đóng băng",n}({})),n("SkillDes",function(n){return n.SEED="Đánh dấu 1 vị trí qua 3 turn, thì sẽ nảy mầm lên 1 quân cờ của bên mình",n.BOMB="Đặt bom lên 1 quân cờ của đối thủ, chỉ định, nổ chậm sau 3 turn",n.RAIN="Spawn 1 ô mưa kích thước (5 x 5) trên bàn cờ",n.QUAKE="Tạo động đất và phá cờ cả 2 bên (mỗi bên 2 con).",n.TIME="Trừ 50% thơi gian chơi của đối thủ trong 5 turn",n.BLOCKAGE="Tạo 3 chướng ngại vật trên bàn cờ ngăn người chơi 2 bên đặt cờ trong 3 turn.",n.FROZONE="Đóng băng quân cờ đối phương làm cho quân cờ đó không đc tính trong 3 turn kế tiếp. Sau 3 turn sẽ được tính lại bình thường.",n}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/EventMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(E){var _,A,T;return{setters:[function(E){_=E.inheritsLoose},function(E){A=E.cclegacy,T=E.EventTarget}],execute:function(){A._RF.push({},"2a38eXO4J5LHZUihRUsJKhe","EventMgr",void 0);var O=function(E){function A(){return E.apply(this,arguments)||this}return _(A,E),A}(T);E("EventName",function(E){return E.START_GAME="START_GAME",E.INIT_BOARD="INIT_BOARD",E.UPDATE_BOARD="UPDATE_BOARD",E.END_GAME="END_GAME",E.RESET_BOARD="RESET_BOARD",E.UPDATE_SKILL_NAME="UPDATE_SKILL_NAME",E.UPDATE_SEED_SHOW="UPDATE_SEED_SHOW",E.UPDATE_TURN_TEXT="UPDATE_TURN_TEXT",E.UPDATE_BOMB_SHOW="UPDATE_BOMB_SHOW",E.REMOVE_BOMB="REMOVE_BOMB",E.UPDATE_ICE_SHOW="UPDATE_ICE_SHOW",E.REMOVE_ICE="REMOVE_ICE",E.UPDATE_BLOCK_SHOW="UPDATE_BLOCK_SHOW",E.UPDATE_PLACEHODLER="UPDATE_PLACEHODLER",E.CLEAR_PLACEHOLDER="CLEAR_PLACEHOLDER",E.SHOW_TOAST="SHOW_TOAST",E.CLEAR_SKILL_USING="CLEAR_SKILL_USING",E.START_PLAY_WITH_BOT="START_PLAY_WITH_BOT",E}({})),E("default",new O);A._RF.pop()}}}));

System.register("chunks:///_virtual/GameMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MainLogic.ts","./EventMgr.ts"],(function(t){var n,i,e,r,a,o,c,l,s,u,p,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,c=t.Node,l=t.Button,s=t.Component},function(t){u=t.MainLogic},function(t){p=t.default,f=t.EventName}],execute:function(){var h,y,m,B,g,d,b,v,M;a._RF.push({},"0d5fc/nRipJh5kJIl5TPMco","GameMgr",void 0);var _=o.ccclass,G=o.property;t("GameMgr",(h=_("GameMgr"),y=G(c),m=G(l),B=G(l),h((b=n((d=function(t){function n(){for(var n,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=t.call.apply(t,[this].concat(a))||this,e(n,"startScr",b,r(n)),e(n,"playBtn",v,r(n)),e(n,"playWithBotBtn",M,r(n)),n}i(n,t);var a=n.prototype;return a.start=function(){this.playBtn.node.on("click",this.startGame,this),this.playWithBotBtn.node.on("click",this.startPlayWBot,this),this.startScr.active=!0},a.update=function(t){},a.startGame=function(){this.startScr.active=!1,u._intance.initChessboardData(),p.emit(f.START_GAME)},a.startPlayWBot=function(){this.startGame(),p.emit(f.START_PLAY_WITH_BOT),u._intance.startPlayWithBot()},n}(s)).prototype,"startScr",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(d.prototype,"playBtn",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(d.prototype,"playWithBotBtn",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=d))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./BattleScreen.ts","./Bot.ts","./Cell.ts","./Chessboard.ts","./Define.ts","./SpawnObject.ts","./MainLogic.ts","./GameMgr.ts","./EventMgr.ts","./Toast.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainLogic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventMgr.ts","./Define.ts","./Bot.ts"],(function(t){var e,i,s,r,n,o,h,u,c,l,a,d,f;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){s=t.cclegacy,r=t.Vec2,n=t.Rect,o=t.Vec3,h=t.Component},function(t){u=t.default,c=t.EventName},function(t){l=t.default,a=t.SkillType,d=t.PlaceholderType},function(t){f=t.Bot}],execute:function(){s._RF.push({},"93344O7rrBMkrJqDqEU3aqC","MainLogic",void 0),t("MainLogic",function(t){function s(){var e;return(e=t.call(this)||this).sizeChess=25,e.turn=0,e.chessboard=[],e.seedList=[],e.bombList=[],e.iceList=[],e.blockList=[],e.removeSkillList=[],e.initDone=!1,e.curPlaceholder=[],e.curUsingSkill=a.NONE,e.timeSchedule=void 0,e.curTime=0,e.oTurnReduceTime=0,e.xTurnReduceTime=0,e.isPlayWithBot=!1,e.isMovingBoard=!1,e.chessboardPos=new o(0),e}e(s,t);var h=s.prototype;return h.startCountTime=function(){var t=this;this.curTime=0,this.timeSchedule=setInterval((function(){t.curTime+=1;var e=t.xTurnReduceTime>0?Math.ceil(l.turnTime/2):l.turnTime,i=t.oTurnReduceTime>0?Math.ceil(l.turnTime/2):l.turnTime,s=t.turn%2==0?i:e;t.curTime>=s&&(u.emit(c.END_GAME,t.turn+1),t.endCountTime())}),1e3)},h.endCountTime=function(){this.curTime=0,clearInterval(this.timeSchedule)},h.initChessboardData=function(){for(var t=0;t<this.sizeChess;t++){this.chessboard[t]=[];for(var e=0;e<this.sizeChess;e++)this.chessboard[t].push("")}u.emit(c.INIT_BOARD),this.initDone=!0,this.startCountTime()},h.toggleSkill=function(t){u.emit(c.CLEAR_PLACEHOLDER),this.curUsingSkill=t,t==a.NONE&&this.showPlaceHolder(d.NONE)},h.unuseSkill=function(){this.toggleSkill(a.NONE)},h.nextTurn=function(){this.turn+=1,this.curTime=0,this.curUsingSkill=a.NONE,this.updateSeedByTurn(),this.updateBombByTurn(),this.updateIceByTurn(),this.updateBlockByTurn(),u.emit(c.UPDATE_BOARD),u.emit(c.UPDATE_SEED_SHOW),u.emit(c.UPDATE_BOMB_SHOW),u.emit(c.UPDATE_ICE_SHOW),u.emit(c.UPDATE_BLOCK_SHOW),u.emit(c.UPDATE_TURN_TEXT,this.turn%2==0?"O":"X"),this.oTurnReduceTime>0&&(this.oTurnReduceTime-=1),this.xTurnReduceTime>0&&(this.xTurnReduceTime-=1),u.emit(c.CLEAR_SKILL_USING),this.isPlayWithBot&&this.turn%2==1&&this.onInBotTurn()},h.selectedCellStart=function(t){this.curUsingSkill==a.RAIN&&(u.emit(c.CLEAR_PLACEHOLDER,this.curPlaceholder),this.curPlaceholder=this.getPlaceholder(d.SIZE_FIVE,t),u.emit(c.UPDATE_PLACEHODLER,this.curPlaceholder))},h.selectedCellChange=function(t){this.curUsingSkill==a.RAIN&&(u.emit(c.CLEAR_PLACEHOLDER,this.curPlaceholder),this.curPlaceholder=this.getPlaceholder(d.SIZE_FIVE,t),u.emit(c.UPDATE_PLACEHODLER,this.curPlaceholder))},h.selectedCellConfirm=function(t){if(this.isMovingBoard)this.isMovingBoard=!1;else switch(this.curUsingSkill){case a.SEED:this.setSeedAt(t)&&(this.toggleSkill(a.NONE),this.showPlaceHolder(d.NONE),u.emit(c.UPDATE_SEED_SHOW));break;case a.BOMB:this.setBombAt(t)?(this.toggleSkill(a.NONE),this.showPlaceHolder(d.NONE),u.emit(c.UPDATE_BOMB_SHOW)):u.emit(c.SHOW_TOAST,"Invalid bomb pos");break;case a.RAIN:this.toggleSkill(a.NONE),console.log("CONFIRM CHANGE: ",t);var e=this.curPlaceholder;this.rainInRegion(e),u.emit(c.UPDATE_SEED_SHOW),u.emit(c.UPDATE_BOMB_SHOW),u.emit(c.UPDATE_BOARD),u.emit(c.CLEAR_PLACEHOLDER,this.curPlaceholder),this.curPlaceholder=[];break;case a.FROZONE:this.setIceAt(t)?(this.toggleSkill(a.NONE),this.showPlaceHolder(d.NONE),u.emit(c.UPDATE_ICE_SHOW)):u.emit(c.SHOW_TOAST,"Invalid ice pos");break;default:this.addStone(t.x,t.y,this.turn%2==1)&&(this.checkWin(t,this.chessboard)?u.emit(c.END_GAME,this.turn):(this.nextTurn(),u.emit(c.UPDATE_BOARD)))}},h.addStone=function(t,e,i){var s=!1,n=i?"X":"O";if(""==this.chessboard[t][e]&&(this.chessboard[t][e]=n,s=!0),"SEED"==this.chessboard[t][e]){var o=this.findSeedAt(new r(t,e));o&&o.owner!=n&&(this.removeSeedAt(new r(t,e)),this.chessboard[t][e]=n,s=!0)}return s},h.resetBoad=function(){for(var t=0;t<this.sizeChess;t++)for(var e=0;e<this.sizeChess;e++)this.chessboard[e][t]="";this.seedList=[],this.bombList=[],this.iceList=[],u.emit(c.UPDATE_TURN_TEXT,"O"),u.emit(c.RESET_BOARD),this.turn=0,this.endCountTime(),this.startCountTime(),this.oTurnReduceTime=0,this.xTurnReduceTime=0,this.unuseSkill()},h.getBoardAtPos=function(t,e,i){return t<0||t>=this.sizeChess||e<0||e>=this.sizeChess?null:i[t][e]},h.checkWin=function(t,e,i){for(var s=0,r=t.x,n=t.x,o=t.y,h=i||this.getBoardAtPos(n,o,e);this.getBoardAtPos(r,o,e)==h;)s++,r++;for(r=n-1;this.getBoardAtPos(r,o,e)==h;)s++,r--;if(5==s)return!0;s=0;for(var u=o;this.getBoardAtPos(n,u,e)==h;)s++,u++;for(u=o-1;this.getBoardAtPos(n,u,e)==h;)s++,u--;if(5==s)return!0;for(u=n,r=o,s=0;this.getBoardAtPos(u,r,e)==h;)s++,u++,r++;for(u=n-1,r=o-1;this.getBoardAtPos(u,r,e)==h;)s++,u--,r--;if(5==s)return!0;for(u=n,r=o,s=0;this.getBoardAtPos(u,r,e)==h;)s++,u++,r--;for(u=n-1,r=o+1;this.getBoardAtPos(u,r,e)==h;)s++,u--,r++;return 5==s},h.resetSeedList=function(){this.seedList=[]},h.updateSeedByTurn=function(){for(var t=0;t<this.seedList.length;t++){var e=this.seedList[t];this.turn%2==0&&"O"==e.owner&&(e.livedTurn+=1),this.turn%2==1&&"X"==e.owner&&(e.livedTurn+=1),e.livedTurn>=l.seedGrownTurn&&(this.chessboard[e.pos.x][e.pos.y]=e.owner,this.checkWin(e.pos,this.chessboard)&&u.emit(c.END_GAME,this.turn))}this.seedList=this.seedList.filter((function(t){return t.livedTurn<l.seedGrownTurn}))},h.addRemoveSkillPos=function(t,e){var i={cellNum:t,skillOrder:e};this.removeSkillList.push(i)},h.useSeed=function(){this.toggleSkill(a.SEED),this.showPlaceHolder(d.EMPTY_CELLS)},h.setSeedAt=function(t){if(""!=this.chessboard[t.x][t.y])return!1;this.chessboard[t.x][t.y]="SEED";var e={pos:t,owner:this.turn%2==0?"O":"X",livedTurn:1};return this.seedList.push(e),!0},h.removeSeedAt=function(t){this.seedList=this.seedList.filter((function(e){return e.pos.x!=t.x&&e.pos.y!=t.y}))},h.findSeedAt=function(t){return this.seedList.find((function(e){return e.pos.x==t.x&&e.pos.y==t.y}))},h.removeSeed=function(t){for(var e=0;e<t.length;e++)this.chessboard[t[e].pos.x][t[e].pos.y]=""},h.useBomb=function(){this.toggleSkill(a.BOMB),this.showPlaceHolder(this.turn%2==0?d.X_CELLS:d.O_CELLS)},h.setBombAt=function(t){if(this.chessboard[t.x][t.y]!=(this.turn%2==0?"X":"O"))return!1;var e={pos:t,owner:this.turn%2==0?"O":"X",existTurn:1};return this.bombList.push(e),!0},h.updateBombByTurn=function(){for(var t=0;t<this.bombList.length;t++)if(this.bombList[t].existTurn+=1,this.bombList[t].existTurn>=l.bombExplodeTurn){var e=this.bombList[t].pos;this.chessboard[e.x][e.y]=""}var i=this.bombList.filter((function(t){return t.existTurn>=l.bombExplodeTurn}));this.bombList=this.bombList.filter((function(t){return t.existTurn<l.bombExplodeTurn})),i.length>0&&u.emit(c.REMOVE_BOMB,i)},h.showPlaceHolder=function(t){u.emit(c.CLEAR_PLACEHOLDER,this.curPlaceholder),this.curPlaceholder=this.getPlaceholder(t),u.emit(c.UPDATE_PLACEHODLER,this.curPlaceholder)},h.getPlaceholder=function(t,e){var i=[];if(t==d.SIZE_FIVE)for(var s=e.y-2;s<=e.y+2;s++)for(var n=e.x-2;n<=e.x+2;n++)if(!(n<0||s<0||n>=this.sizeChess||s>=this.sizeChess)){var o=new r(n,s);i.push(o)}if(t==d.EMPTY_CELLS)for(var h=0;h<this.sizeChess;h++)for(var u=0;u<this.sizeChess;u++)if(""==this.chessboard[h][u]){var c=new r(h,u);i.push(c)}if(t==d.O_CELLS)for(var l=0;l<this.sizeChess;l++)for(var a=0;a<this.sizeChess;a++)if("O"==this.chessboard[l][a]){var f=new r(l,a);i.push(f)}if(t==d.X_CELLS)for(var E=0;E<this.sizeChess;E++)for(var m=0;m<this.sizeChess;m++)if("X"==this.chessboard[E][m]){var T=new r(E,m);i.push(T)}return i},h.useRain=function(){this.toggleSkill(a.RAIN)},h.rainInRegion=function(t){var e=this.getRect(t),i=this.turn%2==0?"O":"X",s=this.bombList.filter((function(t){return t.owner!=i&&e.contains(t.pos)}));s.length>0&&u.emit(c.REMOVE_BOMB,s);var r=this.seedList.filter((function(t){return t.owner!=i&&e.contains(t.pos)}));this.removeSeed(r),this.seedList=this.seedList.filter((function(t){return t.owner==i||!e.contains(t.pos)})),this.bombList=this.bombList.filter((function(t){return t.owner==i||!e.contains(t.pos)}))},h.getRect=function(t){for(var e=new r(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),i=new r(Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER),s=0;s<t.length;s++)t[s].x<e.x&&(e.x=t[s].x),t[s].y<e.y&&(e.y=t[s].y),t[s].x>i.x&&(i.x=t[s].x),t[s].y>i.y&&(i.y=t[s].y);return new n(e.x,e.y,Math.abs(i.x-e.x),Math.abs(i.y-e.y))},h.useQuake=function(){this.toggleSkill(a.QUAKE),this.destroyChessman()},h.destroyChessman=function(){for(var t=l.quakeNumEachSide,e=l.quakeNumEachSide,i=[],s=0;s<this.bombList.length;s++){var n=this.bombList[s];if("O"==n.owner&&t>0){var o=this.bombList[s].pos;this.chessboard[o.x][o.y]="",i.push(n),t-=1}if("X"==n.owner&&e>0){var h=this.bombList[s].pos;this.chessboard[h.x][h.y]="",i.push(n),e-=1}}if(u.emit(c.REMOVE_BOMB,i),this.bombList=this.bombList.filter((function(t){return-1==i.indexOf(t)})),t>0||e>0){for(var a=[],d=[],f=0;f<this.sizeChess;f++)for(var E=0;E<this.sizeChess;E++)"X"==this.chessboard[f][E]&&a.push(new r(f,E)),"O"==this.chessboard[f][E]&&d.push(new r(f,E));for(;t>0&&a.length>0;){var m=Math.floor(Math.random()*a.length);this.chessboard[a[m].x][a[m].y]="",a.splice(m,1),t-=1}for(;e>0&&d.length>0;){var T=Math.floor(Math.random()*d.length);this.chessboard[d[T].x][d[T].y]="",d.splice(T,1),e-=1}}u.emit(c.UPDATE_BOARD)},h.usingTimeReduce=function(){this.toggleSkill(a.TIME),this.turn%2!=0?this.oTurnReduceTime+=l.timeSkillTurnNum:this.xTurnReduceTime+=l.timeSkillTurnNum},h.useBlockage=function(){this.toggleSkill(a.BLOCKAGE),this.setBlock(),u.emit(c.UPDATE_BOARD),u.emit(c.UPDATE_BLOCK_SHOW)},h.setBlock=function(){for(var t=this.getBlockPos(),e=0;e<t.length;e++){var i=t[e],s={pos:t[e].clone(),owner:this.turn%2==0?"O":"X",existTurn:1};this.blockList.push(s),this.chessboard[i.x][i.y]="BLOCK"}},h.getBlockPos=function(){var t=[];if(0==this.turn)for(var e=0;e<l.numBlockInBlokageSkill;e++){var i=Math.floor(Math.random()*this.sizeChess),s=Math.floor(Math.random()*this.sizeChess);t.push(new r(i,s))}else t=this.getBlockPosAround();return t},h.getBlockPosAround=function(){for(var t=[],e=l.numBlockInBlokageSkill,i=f._instance.generateMove(this.chessboard),s=this.turn%2==0?"X":"O",r=[],n=0;n<i.length;n++)this.isNearTarget(s,i[n])&&r.push(i[n]);if(r.length>e){var o=Math.floor(Math.random()*r.length-e);t=r.slice(o,o+e)}if(r.length==e&&(t=r),r.length<e){var h=e-r.length,u=Math.floor(Math.random()*r.length-h);t=r.slice(u,u+h)}return t},h.isNearTarget=function(t,e){for(var i=e.x-1;i<=e.x+1;i++)for(var s=e.y-1;s<=e.y+1;s++)if(!(i<0||i>=this.sizeChess||s<0||s>=this.sizeChess)&&this.chessboard[i][s]==t)return!0;return!1},h.updateBlockByTurn=function(){for(var t=0;t<this.blockList.length;t++){var e=this.blockList[t];if(e.existTurn+=1,e.existTurn>l.blockExistTurn){var i=e.pos;this.chessboard[i.x][i.y]=""}}this.blockList=this.blockList.filter((function(t){return t.existTurn<=l.blockExistTurn}))},h.useFrozone=function(){this.toggleSkill(a.FROZONE),this.showPlaceHolder(this.turn%2==0?d.X_CELLS:d.O_CELLS)},h.setIceAt=function(t){var e=this.chessboard[t.x][t.y];if(e!=(this.turn%2==0?"X":"O"))return!1;var i={pos:t,owner:this.turn%2==0?"O":"X",existTurn:1};return this.chessboard[t.x][t.y]=e+"+ICE",this.iceList.push(i),!0},h.updateIceByTurn=function(){for(var t=0;t<this.iceList.length;t++)if(this.iceList[t].existTurn+=1,this.iceList[t].existTurn>l.iceExistTurn){var e=this.iceList[t].pos;this.chessboard[e.x][e.y]=this.chessboard[e.x][e.y].replace("+ICE","")}var i=this.iceList.filter((function(t){return t.existTurn>l.iceExistTurn}));this.iceList=this.iceList.filter((function(t){return t.existTurn<=l.iceExistTurn})),i.length>0&&u.emit(c.REMOVE_ICE,i)},h.startPlayWithBot=function(){this.isPlayWithBot=!0},h.onInBotTurn=function(){this.blockUserAction(),this.botUseSkill();var t=f._instance.calculateNextMove();this.selectedCellStart(t)},h.blockUserAction=function(){},h.botUseSkill=function(){},i(s,null,[{key:"_intance",get:function(){return s.instance||(s.instance=new s),s.instance}}]),s}(h)).instance=null,s._RF.pop()}}}));

System.register("chunks:///_virtual/SpawnObject.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,c,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t._decorator,r=t.Component}],execute:function(){var o;n._RF.push({},"bafeec+/RNLSYqbhmP2HX2C","SpawnObject",void 0);var u=c.ccclass;c.property,t("SpawnObject",u("SpawnObject")(o=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var c=n.prototype;return c.start=function(){},c.update=function(t){},n}(r))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/Toast.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventMgr.ts"],(function(t){var e,o,n,i,r,a,s,c,u,l,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Node,c=t.Label,u=t.Component},function(t){l=t.default,p=t.EventName}],execute:function(){var f,h,d,v,T,y,b;r._RF.push({},"37cddtsfLxDhp8YLDzDqfQw","Toast",void 0);var g=a.ccclass,w=a.property;t("Toast",(f=g("Toast"),h=w(s),d=w(c),f((y=e((T=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"toastNode",y,i(e)),n(e,"toastTxt",b,i(e)),e}o(e,t);var r=e.prototype;return r.start=function(){l.on(p.SHOW_TOAST,this.showToast,this)},r.update=function(t){},r.showToast=function(t){var e=this;this.toastTxt.string=t,this.toastNode.active=!0,this.scheduleOnce((function(){e.toastNode.active=!1}),2)},e}(u)).prototype,"toastNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(T.prototype,"toastTxt",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=T))||v));r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});