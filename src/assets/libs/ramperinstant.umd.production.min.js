(function(root){var exports=undefined,module=undefined,require=undefined;var define=undefined;var self=root,window=root,global=root,globalThis=root;(function(){!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).RamperInstant={});}(this,function(e){"use strict";function t(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value;}catch(e){return void n(e);}s.done?t(c):Promise.resolve(c).then(r,o);}function n(e){return function(){var n=this,r=arguments;return new Promise(function(o,a){var i=e.apply(n,r);function s(e){t(i,o,a,s,c,"next",e);}function c(e){t(i,o,a,s,c,"throw",e);}s(void 0);});};}function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r]);}return e;}).apply(null,arguments);}function o(){o=function(){return t;};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value;},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t];}try{l({},"");}catch(e){l=function(e,t,n){return e[t]=n;};}function f(e,t,n,r){var o=Object.create((t&&t.prototype instanceof v?t:v).prototype),i=new x(r||[]);return a(o,"_invoke",{value:I(e,n,i)}),o;}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)};}catch(e){return{type:"throw",arg:e};}}t.wrap=f;var h="suspendedStart",p="executing",g="completed",m={};function v(){}function y(){}function w(){}var b={};l(b,s,function(){return this;});var _=Object.getPrototypeOf,S=_&&_(_(T([])));S&&S!==n&&r.call(S,s)&&(b=S);var E=w.prototype=v.prototype=Object.create(b);function L(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e);});});}function C(e,t){function n(o,a,i,s){var c=d(e[o],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then(function(e){n("next",e,i,s);},function(e){n("throw",e,i,s);}):t.resolve(l).then(function(e){u.value=e,i(u);},function(e){return n("throw",e,i,s);});}s(c.arg);}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t(function(t,o){n(e,r,t,o);});}return o=o?o.then(a,a):a();}});}function I(t,n,r){var o=h;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===g){if("throw"===a)throw i;return{value:e,done:!0};}for(r.method=a,r.arg=i;;){var s=r.delegate;if(s){var c=k(s,r);if(c){if(c===m)continue;return c;}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=g,r.arg;r.dispatchException(r.arg);}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?g:"suspendedYield",u.arg===m)continue;return{value:u.arg,done:r.done};}"throw"===u.type&&(o=g,r.method="throw",r.arg=u.arg);}};}function k(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m);}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0);}function T(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n;};return a.next=a;}}throw new TypeError(typeof t+" is not iterable");}return y.prototype=w,a(E,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:y,configurable:!0}),y.displayName=l(w,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name));},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,l(e,u,"GeneratorFunction")),e.prototype=Object.create(E),e;},t.awrap=function(e){return{__await:e};},L(C.prototype),l(C.prototype,c,function(){return this;}),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(f(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next();});},L(E),l(E,u,"Generator"),l(E,s,function(){return this;}),l(E,"toString",function(){return"[object Generator]";}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e;}return e.done=!0,e;};},t.values=T,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e);},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval;},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o;}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc);}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break;}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i);},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m;},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),m;}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n);}return o;}}throw Error("illegal catch attempt");},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m;}},t;}var a,i=function(){function e(e){this.listeners=new Map(),this.listenerManager=e;}var t=e.prototype;return t.addListener=function(e,t){this.listeners.set(e,t),this.listenerManager.add(e,t);},t.removeListener=function(e){var t=this.listeners.get(e);t&&(this.listenerManager.remove(e,t),this.listeners.delete(e));},t.on=function(e,t){this.removeListener(e),this.addListener(e,t);},t.once=function(e,t){var n=this;this.addListener(e,function(r){t(r),n.removeListener(e);});},t.off=function(e){this.listeners.has(e)&&this.removeListener(e);},t.clear=function(){var e=this;this.listeners.forEach(function(t,n){e.listenerManager.remove(n,t);}),this.listeners.clear();},e;}(),s=function(){function e(e){var t=this;this.iframe=null,this._onRecieveMessageCallback=null,this._onReadyCallback=null,this._onSignInSuccess=null,this._onSignInFailed=null,this._onSignMessageSuccess=null,this._doIframeCallback=null,this.eventWrapper=new i({add:function(e,t){window.document.addEventListener(e,t);},remove:function(e,t){window.document.removeEventListener(e,t);}}),this.sdkConfig=null,this.userProfile=null,this.gameGlobaData=Object.create({}),this.source=e,this._onRecieveMessageCallback=null,this._onReadyCallback=null,this._onSignInSuccess=null,this._onSignMessageSuccess=null,this._onSignInFailed=null,window.addEventListener("message",function(e){var n;try{var o;n=JSON.parse(null==(o=e.data)?void 0:o.message);}catch(e){return;}if(void 0!==e.data.action&&"cocosMethod"===e.data.action)switch(n.eventName){case"ready":t._onReadyCallback(n);break;case"sign_out_success":break;case"sign_out_fail":t._doIframeCallback();break;case"sign_transaction_success":break;case"sign_transaction_fail":t._doIframeCallback();break;case"sign_message_success":t.onSignMessage(n.message),t._doIframeCallback();break;case"sign_message_cancel":t._doIframeCallback();break;case"cancel":break;case"sign_in_fail":t._onSignInFailed(n),t._doIframeCallback();break;case"sign_in_success":if(window.Telegram.WebApp.initData){var a=new URLSearchParams(window.Telegram.WebApp.initData),i=JSON.parse(a.get("user"));n.data.tgUser={userId:i.id,userName:i.username,name:i.first_name+" "+i.last_name},t.userProfile=r({},n.data,{tgUser:r({},n.data.tgUser)}),t.onSignMessage(n.data.signature);}t._onSignInSuccess(n),t._doIframeCallback();}});}var t=e.prototype;return t.on=function(e,t){this.eventWrapper.on(e,this.transform(t));},t.off=function(e){this.eventWrapper.off(e);},t.once=function(e,t){this.eventWrapper.once(e,this.transform(t));},t.clear=function(){this.eventWrapper.clear();},t.transform=function(e){return function(t){e(t.detail);};},t.setOnRecieveMessageCallback=function(e){this._onRecieveMessageCallback=e;},t.setReadyCallback=function(e){this._onReadyCallback=e;},t.SetConfig=function(e){this.sdkConfig=r({},e),this._onSignInSuccess=e.onSignInSucess,this._onSignInFailed=e.onSignInFail,this._onSignMessageSuccess=e.onSignMessage;},t.setHideIframeCallback=function(e){this._doIframeCallback=e;},t.onSignMessage=function(e){this.gameGlobaData.signMessage=e,this._onSignMessageSuccess(e);},e;}(),c=function(){function e(){}return e.injectScript=function(e,t){return new Promise(function(n,r){if(document.querySelector('script[src="'+e+'"]'))return console.log("Script "+e+" is already loaded."),void n("Script "+e+" is already loaded.");var o=document.createElement("script");o.src=e,o.type="text/javascript",o.async=!0,o.onload=function(){console.log(e+" has been loaded."),n(e+" has been loaded.");};for(var a=0,i=Object.entries(t);a<i.length;a++){var s=i[a];o.setAttribute(s[0],s[1]);}o.onerror=function(){console.error("Failed to load script: "+e),r(new Error("Failed to load script: "+e));},document.head.appendChild(o);});},e;}();!function(e){e.ETERNAL="ETERNAL",e.CYBORG="CYBORG";}(a||(a={}));var u,l="user/referral/{game_slug}?refCode={refCode}&source={source}",f=function(){function e(){}return e.BaseURLByEnv=function(t,n){var r=e.PARTNERS.find(function(e){return e.name.toLowerCase()===t.toLowerCase();});if(r){var o=r.configs.find(function(e){return e.env===n;});if(o)return e.SocialEndPoint=o.endPoint,e.GameEndPoint=o.gameEndPoint,o.endPoint;console.error("partner with env "+n+" not found endPoint.");}else console.error('config "'+t+'" not found.');},e.BaseURL=function(t,n){return void 0===n&&(n="prod"),0==e.SocialEndPoint.length?e.BaseURLByEnv(t,n):e.SocialEndPoint;},e.LoginURL=function(t,n){return void 0===n&&(n="prod"),e.BaseURL(t,n)+e.LOGIN_TG+"?"+this.FLAG_COCOS+"&credentialResponse="+btoa(window.Telegram.WebApp.initData);},e.LoginWithSignUrl=function(t,n,r){return void 0===r&&(r="prod"),e.BaseURL(t,r)+e.LOGIN_TG+"?"+this.FLAG_COCOS+"&credentialResponse="+btoa(window.Telegram.WebApp.initData)+"&message="+n;},e.SignMessage=function(t,n,r){return void 0===r&&(r="prod"),e.BaseURL(n,r)+e.SIGN_MESSAGE_ENDPOINT+"?&message="+t+"&"+this.FLAG_COCOS+"&credentialResponse="+btoa(window.Telegram.WebApp.initData);},e.SignOut=function(t,n){return void 0===n&&(n="prod"),e.BaseURL(t,n)+e.SIGNIN_ENDPOINT+"?"+this.FLAG_COCOS;},e.GetCurrentDate=function(){var e=new Date();return e.setDate(e.getDate()+28),e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0");},e;}();function d(e){return h.apply(this,arguments);}function h(){return(h=n(o().mark(function e(t){var n,a,i,s,c,u,l;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,a=t.method,i=t.body,null==(null==(s=r({},t.headers))?void 0:s.Authorization)&&delete s.Authorization,c=r({"Content-Type":"application/json"},s),u={method:a,headers:c,body:"GET"===a?void 0:JSON.stringify(i)},console.log(n+" "+a),console.log(c),console.log(u.body),e.prev=8,e.next=11,fetch(n,u);case 11:if((l=e.sent).ok){e.next=15;break;}throw console.error(l.text),new Error("HTTP error! Status: "+l.status);case 15:return e.next=17,l.json();case 17:return e.abrupt("return",e.sent);case 20:throw e.prev=20,e.t0=e.catch(8),console.error("Fetch failed:",e.t0),e.t0;case 24:case"end":return e.stop();}},e,null,[[8,20]]);}))).apply(this,arguments);}f.GameEndPoint="https://api-core.eternals.game/",f.SocialEndPoint="",f.FLAG_COCOS="isCocosForce=true",f.DEFAULT_CHAIN_NAME="tomo",f.SIGNIN_ENDPOINT="wallet/signin",f.SIGN_OUT="signout",f.LOGIN_TG="signin/telegram/hidden",f.SIGN_MESSAGE_ENDPOINT="verify/signMessage",f.IFRAME_ID="top-layer-iframe",f.PARTNERS=[{name:"coin98",configs:[{env:"prod",endPoint:"https://auth-coin98.ramper.xyz/",gameEndPoint:"https://api-core.eternals.game/"},{env:"preprod",endPoint:"https://ramper-v2-coin98-auth-test.coin98.dev/",gameEndPoint:"https://gameverse-profile-stg.coin98.dev/"}]},{name:"ramper",configs:[{env:"prod",endPoint:"https://auth.v2.ramper.xyz/",gameEndPoint:"https://api-core.eternals.game/"},{env:"preprod",endPoint:"https://ramper-v2-auth-test.coin98.dev/",gameEndPoint:"https://gameverse-profile-stg.coin98.dev/"}]}],function(e){e.POST="POST",e.GET="GET",e.PUT="PUT";}(u||(u={}));var p=new s("RamperInstant-1.1.0"),g="",m="2026-12-12";function v(e){y(f.SignOut(p.sdkConfig.partner),e);}function y(e,t){var n=document.getElementById(f.IFRAME_ID);n||((n=document.createElement("iframe")).id=f.IFRAME_ID,n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",n.style.border="none",n.style.zIndex="9999",document.body.appendChild(n)),n.src=e,n.style.display="block",n.onload=t;}function w(){var e=document.getElementById(f.IFRAME_ID);e&&(e.style.display="none");}function b(){return void 0===g||0===g.length?null:"Bearer "+(void 0===g||0===g.length?null:g);}function _(){return m=f.GetCurrentDate(),"Welcome to NinetyEight ecosystem!|{platformSrc}|{date_sign}".replace("{platformSrc}",p.sdkConfig.gameId.toLowerCase()).replace("{date_sign}",m);}function S(){return(S=n(o().mark(function e(){var t,n;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.GameEndPoint+"games/{game_slug}/connect".replace("{game_slug}",p.sdkConfig.gameId),e.next=3,d({url:t,method:u.POST,body:{address:p.userProfile.wallets.tomo.publicKey,dateSig:m,platformSrc:p.sdkConfig.gameId.toLowerCase(),signature:p.gameGlobaData.signMessage},headers:{accept:"*/*","Content-Type":"application/json",Authorization:b()}});case 3:return n=e.sent,console.log(t,n),g=n.data,e.abrupt("return",n.data);case 7:case"end":return e.stop();}},e);}))).apply(this,arguments);}function E(){return(E=n(o().mark(function e(){var t,n;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.GameEndPoint+"user/referral/{game_slug}".replace("{game_slug}",p.sdkConfig.gameId.toLowerCase()),e.next=3,d({url:t,method:u.GET,body:{},headers:{accept:"*/*","Content-Type":"application/json",Authorization:b()}});case 3:return n=e.sent,console.log(t,n),e.abrupt("return",n);case 6:case"end":return e.stop();}},e);}))).apply(this,arguments);}function L(){return(L=n(o().mark(function e(t,n){var r,a;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.GameEndPoint+l.replace("{game_slug}",p.sdkConfig.gameId.toLowerCase()).replace("{refCode}",t).replace("{source}",n),e.next=3,d({url:r,method:u.POST,body:{},headers:{accept:"*/*","Content-Type":"application/json",Authorization:b()}});case 3:return a=e.sent,console.log(r,a),e.abrupt("return",a);case 6:case"end":return e.stop();}},e);}))).apply(this,arguments);}e.gameConnect=function(){return S.apply(this,arguments);},e.getDefaultRawSignMsg=_,e.getReferral=function(){return E.apply(this,arguments);},e.getSDKVersion=function(){return"1.1.0";},e.hideIframe=w,e.initializeAsync=function(e,t){return void 0===t&&(t="prod"),new Promise(function(n,r){f.BaseURLByEnv(e.partner,t),p.clear(),p.SetConfig(e),p.setReadyCallback(function(){!function(){if(window.Telegram.WebApp.initData){var e=JSON.stringify({type:"login_telegram",data:window.Telegram.WebApp.initData});window.postMessage(e,"*");}else console.error("Telegram WebApp is not initialized.");}();}),p.setHideIframeCallback(w),Promise.all([c.injectScript("https://telegram.org/js/telegram-web-app.js",{})]).then(function(){v(function(){y(f.LoginWithSignUrl(p.sdkConfig.partner,_()),function(){n({});});});}).catch(function(e){console.error("init telegram script failed",e.message),r(e);});});},e.setReferral=function(e,t){return L.apply(this,arguments);},e.showIframe=y,e.signMessage=function(e){y(f.SignMessage(e,p.sdkConfig.partner),function(){});},e.signOut=v,Object.defineProperty(e,"__esModule",{value:!0});});}).call(root);})(// The environment-specific global.
function(){if(typeof globalThis!=='undefined')return globalThis;if(typeof self!=='undefined')return self;if(typeof window!=='undefined')return window;if(typeof global!=='undefined')return global;if(typeof this!=='undefined')return this;return{};}.call(this));